<?php

# @autogenerated
declare(strict_types=1);

use Civi\Lughauth\Features\Access\User\Domain\UserRef;
use Civi\Lughauth\Features\Access\RelyingParty\Domain\RelyingPartyRef;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\TrustedClientRef;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRolesListRef;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityUserVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRelyingPartyVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityTrustedClientVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRolesVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRolesUidVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRolesRoleVO;
use Civi\Lughauth\Features\Access\Role\Domain\RoleRef;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRolesVersionVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityRolesItem;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\ValueObject\UserIdentityVersionVO;
use Civi\Lughauth\Features\Access\UserIdentity\Domain\UserIdentityAttributes;
use PHPUnit\Framework\TestCase;

final class UserIdentityAttributesUnitTest extends TestCase
{
    public function test(): void
    {
        $value = new UserIdentityAttributes();
        $userOneValue = new UserRef('one');
        $userOtherValue = new UserRef('other');
        $copy = $value->user($userOneValue);
        $this->assertSame($value, $copy);
        $this->assertEquals(new UserRef('one'), $value->getUser());
        $this->assertNotEquals(new UserRef('other'), $value->getUser());
        $this->assertEquals(new UserRef('one'), $value->getUserOrDefault(UserIdentityUserVO::from($userOtherValue))->value());
        $this->assertNotEquals(new UserRef('other'), $value->getUserOrDefault(UserIdentityUserVO::from($userOtherValue))->value());
        $value->unsetUser();
        $this->assertEquals(new UserRef('other'), $value->getUserOrDefault(UserIdentityUserVO::from($userOtherValue))->value());
        $this->assertNotEquals(new UserRef('one'), $value->getUserOrDefault(UserIdentityUserVO::from($userOtherValue))->value());
        $relyingPartyOneValue = new RelyingPartyRef('one');
        $relyingPartyOtherValue = new RelyingPartyRef('other');
        $copy = $value->relyingParty($relyingPartyOneValue);
        $this->assertSame($value, $copy);
        $this->assertEquals(new RelyingPartyRef('one'), $value->getRelyingParty());
        $this->assertNotEquals(new RelyingPartyRef('other'), $value->getRelyingParty());
        $this->assertEquals(new RelyingPartyRef('one'), $value->getRelyingPartyOrDefault(UserIdentityRelyingPartyVO::from($relyingPartyOtherValue))->value());
        $this->assertNotEquals(new RelyingPartyRef('other'), $value->getRelyingPartyOrDefault(UserIdentityRelyingPartyVO::from($relyingPartyOtherValue))->value());
        $value->unsetRelyingParty();
        $this->assertEquals(new RelyingPartyRef('other'), $value->getRelyingPartyOrDefault(UserIdentityRelyingPartyVO::from($relyingPartyOtherValue))->value());
        $this->assertNotEquals(new RelyingPartyRef('one'), $value->getRelyingPartyOrDefault(UserIdentityRelyingPartyVO::from($relyingPartyOtherValue))->value());
        $trustedClientOneValue = new TrustedClientRef('one');
        $trustedClientOtherValue = new TrustedClientRef('other');
        $copy = $value->trustedClient($trustedClientOneValue);
        $this->assertSame($value, $copy);
        $this->assertEquals(new TrustedClientRef('one'), $value->getTrustedClient());
        $this->assertNotEquals(new TrustedClientRef('other'), $value->getTrustedClient());
        $this->assertEquals(new TrustedClientRef('one'), $value->getTrustedClientOrDefault(UserIdentityTrustedClientVO::from($trustedClientOtherValue))->value());
        $this->assertNotEquals(new TrustedClientRef('other'), $value->getTrustedClientOrDefault(UserIdentityTrustedClientVO::from($trustedClientOtherValue))->value());
        $value->unsetTrustedClient();
        $this->assertEquals(new TrustedClientRef('other'), $value->getTrustedClientOrDefault(UserIdentityTrustedClientVO::from($trustedClientOtherValue))->value());
        $this->assertNotEquals(new TrustedClientRef('one'), $value->getTrustedClientOrDefault(UserIdentityTrustedClientVO::from($trustedClientOtherValue))->value());
        $rolesOneValue = new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('one'),
            UserIdentityRolesRoleVO::from(new RoleRef('one')),
            UserIdentityRolesVersionVO::from(1)
        ));
        $rolesOtherValue = new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('other'),
            UserIdentityRolesRoleVO::from(new RoleRef('other')),
            UserIdentityRolesVersionVO::from(2)
        ));
        $copy = $value->roles($rolesOneValue);
        $this->assertSame($value, $copy);
        $this->assertEquals(new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('one'),
            UserIdentityRolesRoleVO::from(new RoleRef('one')),
            UserIdentityRolesVersionVO::from(1)
        )), $value->getRoles());
        $this->assertNotEquals(new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('other'),
            UserIdentityRolesRoleVO::from(new RoleRef('other')),
            UserIdentityRolesVersionVO::from(2)
        )), $value->getRoles());
        $this->assertEquals(new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('one'),
            UserIdentityRolesRoleVO::from(new RoleRef('one')),
            UserIdentityRolesVersionVO::from(1)
        )), $value->getRolesOrDefault(UserIdentityRolesVO::from($rolesOtherValue))->value());
        $this->assertNotEquals(new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('other'),
            UserIdentityRolesRoleVO::from(new RoleRef('other')),
            UserIdentityRolesVersionVO::from(2)
        )), $value->getRolesOrDefault(UserIdentityRolesVO::from($rolesOtherValue))->value());
        $value->unsetRoles();
        $this->assertEquals(new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('other'),
            UserIdentityRolesRoleVO::from(new RoleRef('other')),
            UserIdentityRolesVersionVO::from(2)
        )), $value->getRolesOrDefault(UserIdentityRolesVO::from($rolesOtherValue))->value());
        $this->assertNotEquals(new UserIdentityRolesListRef(new UserIdentityRolesItem(
            UserIdentityRolesUidVO::from('one'),
            UserIdentityRolesRoleVO::from(new RoleRef('one')),
            UserIdentityRolesVersionVO::from(1)
        )), $value->getRolesOrDefault(UserIdentityRolesVO::from($rolesOtherValue))->value());
        $versionOneValue = 1;
        $versionOtherValue = 2;
        $copy = $value->version($versionOneValue);
        $this->assertSame($value, $copy);
        $this->assertEquals(1, $value->getVersion());
        $this->assertNotEquals(2, $value->getVersion());
        $this->assertEquals(1, $value->getVersionOrDefault(UserIdentityVersionVO::from($versionOtherValue))->value());
        $this->assertNotEquals(2, $value->getVersionOrDefault(UserIdentityVersionVO::from($versionOtherValue))->value());
        $value->unsetVersion();
        $this->assertEquals(2, $value->getVersionOrDefault(UserIdentityVersionVO::from($versionOtherValue))->value());
        $this->assertNotEquals(1, $value->getVersionOrDefault(UserIdentityVersionVO::from($versionOtherValue))->value());
        $this->assertSame($value, $copy);
    }
}
