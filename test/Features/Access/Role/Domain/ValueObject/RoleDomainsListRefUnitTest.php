<?php

# @autogenerated
declare(strict_types=1);

use Civi\Lughauth\Features\Access\Role\Domain\ValueObject\RoleDomainsUidVO;
use Civi\Lughauth\Features\Access\Role\Domain\ValueObject\RoleDomainsSecurityDomainVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\SecurityDomainRef;
use Civi\Lughauth\Features\Access\Role\Domain\ValueObject\RoleDomainsVersionVO;
use Civi\Lughauth\Features\Access\Role\Domain\ValueObject\RoleDomainsListRef;
use Civi\Lughauth\Features\Access\Role\Domain\ValueObject\RoleDomainsItem;
use PHPUnit\Framework\TestCase;

class RoleDomainsListRefUnitTest extends TestCase
{
    public function test_iterator(): void
    {
        $one = new RoleDomainsItem(
            uid: RoleDomainsUidVO::from('one'),
            securityDomain: RoleDomainsSecurityDomainVO::from($this->getMockBuilder(SecurityDomainRef::class)->setConstructorArgs(['one'])->getMock()),
            version: RoleDomainsVersionVO::from(1)
        );
        $two = new RoleDomainsItem(
            uid: RoleDomainsUidVO::from('one'),
            securityDomain: RoleDomainsSecurityDomainVO::from($this->getMockBuilder(SecurityDomainRef::class)->setConstructorArgs(['one'])->getMock()),
            version: RoleDomainsVersionVO::from(1)
        );
        $list = RoleDomainsListRef::fromArray([$one, $two]);
        foreach ($list as $_K => $item) {
            $this->assertEquals('one', $item->uid());
        }
    }
    public function test_invalid_builder(): void
    {
        $this->expectException(\InvalidArgumentException::class);
        $list = RoleDomainsListRef::fromArray(['none']);
    }
}
