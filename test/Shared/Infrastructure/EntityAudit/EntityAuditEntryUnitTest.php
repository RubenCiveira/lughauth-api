<?php

/* @autogenerated */
declare(strict_types=1);

use PHPUnit\Framework\TestCase;
use Civi\Lughauth\Shared\Infrastructure\EntityAudit\EntityAuditEntry;

final class EntityAuditEntryUnitTest extends TestCase
{
    public function testPropertiesStored(): void
    {
        $timestamp = new DateTimeImmutable('2024-01-01 00:00:00');
        $entry = new EntityAuditEntry(
            'trace',
            'span',
            'update',
            'usecase',
            'User',
            '1',
            ['name' => 'old'],
            ['name' => 'new'],
            'actor',
            'tenant',
            $timestamp,
            '/path',
            '127.0.0.1',
            'app',
            'device',
            ['role' => 'admin']
        );

        $this->assertSame('trace', $entry->traceId);
        $this->assertSame('span', $entry->spanId);
        $this->assertSame('update', $entry->operation);
        $this->assertSame('usecase', $entry->usecase);
        $this->assertSame('User', $entry->entityType);
        $this->assertSame('1', $entry->entityId);
        $this->assertSame(['name' => 'old'], $entry->oldValue);
        $this->assertSame(['name' => 'new'], $entry->newValue);
        $this->assertSame('actor', $entry->performedBy);
        $this->assertSame('tenant', $entry->tenant);
        $this->assertSame($timestamp, $entry->timestamp);
        $this->assertSame('/path', $entry->sourceRequest);
        $this->assertSame('127.0.0.1', $entry->remoteAddress);
        $this->assertSame('app', $entry->remoteApplication);
        $this->assertSame('device', $entry->remoteDevice);
        $this->assertSame(['role' => 'admin'], $entry->claims);
    }
}
