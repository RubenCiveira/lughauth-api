<?php

/* @autogenerated */
declare(strict_types=1);

use PHPUnit\Framework\TestCase;
use Slim\Interfaces\RouteCollectorInterface;
use Slim\Interfaces\RouteInterface;
use Slim\App;
use Civi\Lughauth\Shared\Infrastructure\Management\Routes\RoutesManagement;

final class RoutesManagementUnitTest extends TestCase
{
    public function testGetListsRoutes(): void
    {
        $route = $this->createMock(RouteInterface::class);
        $route->method('getMethods')->willReturn(['GET', 'POST']);
        $route->method('getPattern')->willReturn('/users');
        $route->method('getName')->willReturn('users.list');

        $collector = $this->createMock(RouteCollectorInterface::class);
        $collector->method('getRoutes')->willReturn([$route]);

        $app = $this->createMock(App::class);
        $app->method('getRouteCollector')->willReturn($collector);

        $management = new RoutesManagement($app);
        $result = ($management->get())();

        $this->assertSame('routes', $management->name());
        $this->assertSame([
            ['method' => 'GET', 'path' => '/users [name: users.list]'],
            ['method' => 'POST', 'path' => '/users [name: users.list]']
        ], $result);
    }
}
