<?php

/* @autogenerated */
declare(strict_types=1);

use PHPUnit\Framework\TestCase;
use Civi\Lughauth\Shared\Connector\FileStorage\BinaryContent;
use Civi\Lughauth\Shared\Connector\FileStorage\FileStoreKey;
use Civi\Lughauth\Shared\Connector\FileStorage\FileStorageInterface;

final class FileStorageInterfaceUnitTest extends TestCase
{
    public function testInterfaceContractCanBeImplemented(): void
    {
        $storage = new class () implements FileStorageInterface {
            public function tempStore(BinaryContent $source): FileStoreKey
            {
                return new FileStoreKey('tmp');
            }

            public function retrieveTempFile(FileStoreKey $key): ?BinaryContent
            {
                return null;
            }

            public function retrieveFile(FileStoreKey $key): ?BinaryContent
            {
                return null;
            }

            public function commitContent(FileStoreKey $key): FileStoreKey
            {
                return $key;
            }

            public function replaceContent(FileStoreKey $key, BinaryContent $content)
            {
                return $key;
            }

            public function deleteFile(FileStoreKey $key)
            {
            }
        };

        $stream = fopen('php://temp', 'r+');
        $key = $storage->tempStore(new BinaryContent('name', 'mime', new DateTime(), $stream));
        $this->assertInstanceOf(FileStoreKey::class, $key);
        $this->assertSame('tmp', $key->key);
        $this->assertSame($key, $storage->commitContent($key));

        fclose($stream);
    }
}
