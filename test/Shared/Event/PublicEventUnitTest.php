<?php

/* @autogenerated */
declare(strict_types=1);

use PHPUnit\Framework\TestCase;
use Civi\Lughauth\Shared\Event\PublicEvent;

/**
 * Unit tests for the PublicEvent contract.
 */
final class PublicEventUnitTest extends TestCase
{
    /**
     * Ensures the public event contract returns expected values.
     */
    public function testPublicEventContract(): void
    {
        /*
         * Arrange: build a test public event implementation.
         */
        $event = new class () implements PublicEvent {
            public function eventType(): string
            {
                return 'user.registered';
            }

            public function schemaVersion(): string
            {
                return 'v1';
            }

            public function payload(): array
            {
                return ['id' => 'u1'];
            }

            public function original(): array
            {
                return ['id' => 'u1', 'email' => 'hidden'];
            }
        };

        /*
         * Act: retrieve the event metadata and payloads.
         */
        $eventType = $event->eventType();
        $version = $event->schemaVersion();
        $payload = $event->payload();
        $original = $event->original();

        /*
         * Assert: verify the contract returns the expected values.
         */
        $this->assertSame('user.registered', $eventType);
        $this->assertSame('v1', $version);
        $this->assertSame(['id' => 'u1'], $payload);
        $this->assertSame(['id' => 'u1', 'email' => 'hidden'], $original);
    }
}
