<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Bootstrap\Plugin;

use Override;
use Slim\Routing\RouteCollectorProxy;
use Civi\Lughauth\Shared\Infrastructure\MicroPlugin;
use Civi\Lughauth\Features\Rcab\Resource\Infrastructure\Driver\PermissionCheck;
use Civi\Lughauth\Features\Rcab\Resource\Infrastructure\Driver\ResourceRegister;

class RcabPlugin extends MicroPlugin
{
    #[Override]
    public function registerRoutes(RouteCollectorProxy $app)
    {
        $app->group('/authz/protection', function (RouteCollectorProxy $group) {
            $group->get('/grant', [PermissionCheck::class, 'getForRoles']);
            $group->group('/resource', function (RouteCollectorProxy $registerGroup) {
                $registerGroup->post('/scope', [ResourceRegister::class, 'registerScopes']);
                $registerGroup->post('/schema', [ResourceRegister::class, 'registerSchemas']);
            });
        });

    }
}
