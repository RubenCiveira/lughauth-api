<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Connector\FileStorage;

/**
 * The public url of a binary content is the url to call from public systems.
 * for example: the gdrive public url
 *
 * We can use it from rest layer to expose a url and avoid use the server as proxy.
 *
 * Public means that the access control of the file would be delegated to the external system.
 */
class BinaryContent
{
    public static function fromFile(string $path): BinaryContent
    {
        $resource = fopen($path, 'rb');
        return new BinaryContent(name: basename($path), mime: 'binary', lastChange: new \DateTime(), stream: $resource);
    }

    public function __construct(
        public readonly string $name,
        public readonly string $mime,
        public readonly \DateTime $lastChange,
        public readonly mixed $stream,
        public readonly ?string $publicUrl = null
    ) {
    }
}
