<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Infrastructure;

use Psr\Container\ContainerInterface;
use DI\Container;
use Slim\App;
use Slim\Routing\RouteCollectorProxy;
use Slim\Middleware\ErrorMiddleware;
use Civi\Lughauth\Shared\Event\EventListenersRegistrarInterface;
use Civi\Lughauth\Shared\Infrastructure\Scheduler\SchedulerManager;

/**
 * Base class for wiring microservice plugins into the container.
 */
abstract class MicroPlugin
{
    /**
     * Registers framework hooks for routes, events, schedulers, and errors.
     */
    public function bindServices(Container $container): void
    {
        $app = $container->get(App::class);
        $this->registerRoutes($app);
        $bus = $container->get(EventListenersRegistrarInterface::class);
        $this->registerEvents($bus);
        $scheduler = $container->get(SchedulerManager::class);
        $this->registerSchedulers($scheduler);
        $error = $container->get(ErrorMiddleware::class);
        $this->registerErrorHandler($error);
    }

    /**
     * Registers HTTP routes for the plugin.
     */
    public function registerRoutes(RouteCollectorProxy $collector): void
    {
    }

    /**
     * Registers event listeners for the plugin.
     */
    public function registerEvents(EventListenersRegistrarInterface $listener): void
    {
    }

    /**
     * Registers scheduled tasks for the plugin.
     */
    public function registerSchedulers(SchedulerManager $scheduler): void
    {
    }

    /**
     * Returns management endpoints exposed by the plugin.
     */
    public function getManagementsInterfaces(ContainerInterface $container): array
    {
        return [];
    }

    /**
     * Registers error handlers for the plugin.
     */
    public function registerErrorHandler(ErrorMiddleware $errorHandler): void
    {
    }

    /**
     * Registers startup hooks for the plugin.
     */
    public function registerStartup(StartupProcessor $processor): void
    {
    }

    /**
     * Allows mutation of container service definitions.
     */
    public function registerServiceDefinition(array $def): array
    {
        return $def;
    }
}
