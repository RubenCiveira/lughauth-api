<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Infrastructure\MicroPlugin;

use Civi\Lughauth\Shared\Infrastructure\Management\Apidoc\ApidocManagement;
use Override;
use Psr\Container\ContainerInterface;
use Civi\Lughauth\Shared\Infrastructure\MicroPlugin;
use Civi\Lughauth\Shared\Infrastructure\Management\Health\HealthManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Metrics\MetricsManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Migration\MigrationManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Config\ConfigManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Dependencies\DependenciesManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Log\LogManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Routes\RoutesManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Trace\TraceManagement;
use Civi\Lughauth\Shared\Infrastructure\Management\Collector\LogCollector;
use Civi\Lughauth\Shared\Infrastructure\Management\Collector\TraceCollector;

class ManagementPlugin extends MicroPlugin
{
    #[Override]
    public function getManagementsInterfaces(ContainerInterface $container): array
    {
        $health = $container->get(HealthManagement::class);
        $metrics = $container->get(MetricsManagement::class);
        $migrations = $container->get(MigrationManagement::class);
        $config = $container->get(ConfigManagement::class);
        $routes = $container->get(RoutesManagement::class);
        $dependencies = $container->get(DependenciesManagement::class);
        $logs = $container->get(LogManagement::class);
        $traces = $container->get(TraceManagement::class);
        $traceCollect = $container->get(TraceCollector::class);
        $logCollect = $container->get(LogCollector::class);
        $apiDocs = $container->get(ApidocManagement::class);
        return [$health, $metrics, $migrations, $config, $routes, $dependencies, $logs, $traces, $traceCollect, $logCollect, $apiDocs];
    }

    #[Override]
    public function onStartup(ContainerInterface $container): void
    {
        $migrations = $container->get(MigrationManagement::class);
        $callback = $migrations->set();
        $callback();
    }
}
