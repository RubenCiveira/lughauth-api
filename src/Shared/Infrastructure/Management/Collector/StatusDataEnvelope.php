<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Infrastructure\Management\Collector;

use Override;
use OpenTelemetry\SDK\Trace\StatusDataInterface;

class StatusDataEnvelope implements StatusDataInterface
{
    public const CODE_UNSET = 'UNSET';
    public const CODE_OK = 'OK';
    public const CODE_ERROR = 'ERROR';

    private function __construct(
        private readonly string $code,
        private readonly string $description = ''
    ) {
    }

    #[Override]
    public static function ok(): self
    {
        return new self(self::CODE_OK);
    }

    #[Override]
    public static function error(): self
    {
        return new self(self::CODE_ERROR);
    }

    #[Override]
    public static function unset(): self
    {
        return new self(self::CODE_UNSET);
    }

    #[Override]
    public function getCode(): string
    {
        return $this->code;
    }

    #[Override]
    public function getDescription(): string
    {
        return $this->description;
    }

    public static function fromRaw(?array $input): self
    {
        $code = match ($input['code'] ?? null) {
            1 => self::CODE_ERROR,
            0 => self::CODE_OK,
            default => self::CODE_UNSET,
        };
        return new self($code, $input['message'] ?? '');
    }
}
