<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Infrastructure;

use Override;
use Psr\Container\ContainerInterface;
use Slim\Middleware\ErrorMiddleware;
use Slim\Routing\RouteCollectorProxy;
use Civi\Lughauth\Shared\Event\EventListenersRegistrarInterface;
use Civi\Lughauth\Shared\Infrastructure\Scheduler\SchedulerManager;

abstract class AggregatedMicroPlugin extends MicroPlugin
{
    public function __construct(
        /**
         * @var MicroPlugin[] delegateds
         */
        private readonly array $delegated
    ) {
    }

    #[Override]
    public function registerRoutes(RouteCollectorProxy $collector): void
    {
        foreach ($this->delegated as $del) {
            $del->registerRoutes($collector);
        }
    }

    #[Override]
    public function registerEvents(EventListenersRegistrarInterface $listener): void
    {
        foreach ($this->delegated as $del) {
            $del->registerEvents($listener);
        }
    }

    #[Override]
    public function registerSchedulers(SchedulerManager $scheduler): void
    {
        foreach ($this->delegated as $del) {
            $del->registerSchedulers($scheduler);
        }
    }

    #[Override]
    public function getManagementsInterfaces(ContainerInterface $container): array
    {
        $result = [];
        foreach ($this->delegated as $del) {
            $childs = $del->getManagementsInterfaces($container);
            $result = [...$childs, ...$result];
        }
        return $result;
    }

    #[Override]
    public function registerErrorHandler(ErrorMiddleware $errorHandler): void
    {
        foreach ($this->delegated as $del) {
            $del->registerErrorHandler($errorHandler);
        }
    }

    #[Override]
    public function registerStartup(StartupProcessor $processor): void
    {
        foreach ($this->delegated as $del) {
            $del->registerStartup($processor);
        }
    }

    #[Override]
    public function registerServiceDefinition(array $def): array
    {
        foreach ($this->delegated as $del) {
            $def = $del->registerServiceDefinition($def);
        }
        return $def;
    }
}
