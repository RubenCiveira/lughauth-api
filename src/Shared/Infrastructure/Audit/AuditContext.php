<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Infrastructure\Audit;

final class AuditContext
{
    private ?string $actionId = null;

    /** @var AuditChange[] */
    private array $changes = [];

    public function setActionId(string $actionId): void
    {
        $this->actionId = $actionId;
    }

    public function getActionId(): ?string
    {
        return $this->actionId;
    }

    public function hasAction(): bool
    {
        return $this->actionId !== null;
    }

    public function addChange(AuditChange $change): void
    {
        $this->changes[] = $change;
    }

    /**
     * Recupera los cambios acumulados y los vacÃ­a.
     *
     * @return AuditChange[]
     */
    public function consumeChanges(): array
    {
        $out = $this->changes;
        $this->changes = [];
        return $out;
    }

    public function reset(): void
    {
        $this->actionId = null;
        $this->changes = [];
    }
}
