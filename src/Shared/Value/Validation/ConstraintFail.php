<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Shared\Value\Validation;

/**
 * Represents a validation failure for a specific field or group of fields.
 *
 * A ConstraintFail encapsulates detailed information about the failure,
 * including the error code, the fields involved, the values that failed validation,
 * and optionally, the expected values.
 *
 * @api
 */
class ConstraintFail
{
    /**
     * Creates a ConstraintFail instance from a RuleFail and a field name.
     *
     * This is a convenience method to transform low-level rule validation
     * failures into structured constraint violations tied to a specific field.
     *
     * @param string $field The name of the field that failed validation.
     * @param RuleFail $fail The underlying rule failure information.
     * @return ConstraintFail The constructed constraint failure.
     */
    public static function fromRuleFail(string $field, RuleFail $fail): ConstraintFail
    {
        return new ConstraintFail($fail->code, [$field], [$fail->value], $fail->expectedValues);
    }
    /**
     * Constructs a new ConstraintFail.
     */
    public function __construct(
        /** @var string A string identifying the type of validation error. */
        public readonly string $code,
        /** @var string[] The list of field names associated with the failure. */
        public readonly array $fields,
        /** @var array<int, mixed> The actual values that did not pass validation. */
        public readonly array $wrongValues,
        /** @var array<string, mixed> The values that would have passed validation. */
        public readonly array $expectedValues = [],
    ) {
    }
}
