<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TrustedClient\Domain;

use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientUidAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientUidVO;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientCodeAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientCodeVO;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientPublicAllowAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientPublicAllowVO;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientSecretOauthAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientSecretOauthVO;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientEnabledAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientEnabledVO;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientAllowedRedirectsAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientAllowedRedirectsVO;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\Holder\TrustedClientVersionAttributeHolder;
use Civi\Lughauth\Features\Access\TrustedClient\Domain\ValueObject\TrustedClientVersionVO;
use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;

class TrustedClientAttributes
{
    use TrustedClientUidAttributeHolder;
    use TrustedClientCodeAttributeHolder;
    use TrustedClientPublicAllowAttributeHolder;
    use TrustedClientSecretOauthAttributeHolder;
    use TrustedClientEnabledAttributeHolder;
    use TrustedClientAllowedRedirectsAttributeHolder;
    use TrustedClientVersionAttributeHolder;

    private const UNSETS = [
      'uid' => 'unsetUid',
      'code' => 'unsetCode',
      'publicAllow' => 'unsetPublicAllow',
      'secretOauth' => 'unsetSecretOauth',
      'enabled' => 'unsetEnabled',
      'allowedRedirects' => 'unsetAllowedRedirects',
      'version' => 'unsetVersion',
    ];

    public function build(): TrustedClient
    {
        $errors = new ConstraintFailList();
        $uid = TrustedClientUidVO::tryFrom($this->uid, $errors);
        $code = TrustedClientCodeVO::tryFrom($this->code, $errors);
        $publicAllow = TrustedClientPublicAllowVO::tryFrom($this->publicAllow, $errors);
        $secretOauth = TrustedClientSecretOauthVO::tryFrom($this->secretOauth, $errors);
        $enabled = TrustedClientEnabledVO::tryFrom($this->enabled, $errors);
        $allowedRedirects = TrustedClientAllowedRedirectsVO::tryFrom($this->allowedRedirects, $errors);
        $version = TrustedClientVersionVO::tryFrom($this->version, $errors);
        if ($errors->hasErrors()) {
            throw $errors->asConstraintException();
        }    return new TrustedClient(
            uid: $uid,
            code: $code,
            publicAllow: $publicAllow,
            secretOauth: $secretOauth,
            enabled: $enabled,
            allowedRedirects: $allowedRedirects,
            version: $version,
        );
    }
    public function withAssertedRules(): TrustedClientAttributes
    {
        $value = new TrustedClientAttributes();
        $errorsList = new ConstraintFailList();
        $this->withAssertedUidRules($value, $errorsList);
        $this->withAssertedCodeRules($value, $errorsList);
        $this->withAssertedPublicAllowRules($value, $errorsList);
        $this->withAssertedSecretOauthRules($value, $errorsList);
        $this->withAssertedEnabledRules($value, $errorsList);
        $this->withAssertedAllowedRedirectsRules($value, $errorsList);
        $this->withAssertedVersionRules($value, $errorsList);
        if ($errorsList->hasErrors()) {
            throw $errorsList->asConstraintException();
        }
        return $value;
    }
    public function unset($field)
    {
        if (isset(self::UNSETS[$field])) {
            call_user_func([$this, self::UNSETS[$field]]);
        }
    }
    public function withDefaults(): TrustedClientAttributes
    {
        $this->withDefaultUid();
        $this->withDefaultCode();
        $this->withDefaultPublicAllow();
        $this->withDefaultSecretOauth();
        $this->withDefaultEnabled();
        $this->withDefaultAllowedRedirects();
        $this->withDefaultVersion();
        return $this;
    }
}
