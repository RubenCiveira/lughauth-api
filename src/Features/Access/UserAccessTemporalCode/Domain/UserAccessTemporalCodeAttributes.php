<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain;

use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeUidAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeUidVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeUserAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeUserVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeTempSecondFactorSeedAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeTempSecondFactorSeedVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeTempSecondFactorSeedExpirationAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeTempSecondFactorSeedExpirationVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeFailedLoginAttemptsAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeFailedLoginAttemptsVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeRegisterCodeAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeRegisterCodeVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeRecoveryCodeAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeRecoveryCodeVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeRecoveryCodeExpirationAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeRecoveryCodeExpirationVO;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\Holder\UserAccessTemporalCodeVersionAttributeHolder;
use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeVersionVO;
use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;

class UserAccessTemporalCodeAttributes
{
    use UserAccessTemporalCodeUidAttributeHolder;
    use UserAccessTemporalCodeUserAttributeHolder;
    use UserAccessTemporalCodeTempSecondFactorSeedAttributeHolder;
    use UserAccessTemporalCodeTempSecondFactorSeedExpirationAttributeHolder;
    use UserAccessTemporalCodeFailedLoginAttemptsAttributeHolder;
    use UserAccessTemporalCodeRegisterCodeAttributeHolder;
    use UserAccessTemporalCodeRecoveryCodeAttributeHolder;
    use UserAccessTemporalCodeRecoveryCodeExpirationAttributeHolder;
    use UserAccessTemporalCodeVersionAttributeHolder;

    private const UNSETS = [
      'uid' => 'unsetUid',
      'user' => 'unsetUser',
      'tempSecondFactorSeed' => 'unsetTempSecondFactorSeed',
      'tempSecondFactorSeedExpiration' => 'unsetTempSecondFactorSeedExpiration',
      'failedLoginAttempts' => 'unsetFailedLoginAttempts',
      'registerCode' => 'unsetRegisterCode',
      'recoveryCode' => 'unsetRecoveryCode',
      'recoveryCodeExpiration' => 'unsetRecoveryCodeExpiration',
      'version' => 'unsetVersion',
    ];

    public function build(): UserAccessTemporalCode
    {
        $errors = new ConstraintFailList();
        $uid = UserAccessTemporalCodeUidVO::tryFrom($this->uid, $errors);
        $user = UserAccessTemporalCodeUserVO::tryFrom($this->user, $errors);
        $tempSecondFactorSeed = UserAccessTemporalCodeTempSecondFactorSeedVO::tryFrom($this->tempSecondFactorSeed, $errors);
        $tempSecondFactorSeedExpiration = UserAccessTemporalCodeTempSecondFactorSeedExpirationVO::tryFrom($this->tempSecondFactorSeedExpiration, $errors);
        $failedLoginAttempts = UserAccessTemporalCodeFailedLoginAttemptsVO::tryFrom($this->failedLoginAttempts, $errors);
        $registerCode = UserAccessTemporalCodeRegisterCodeVO::tryFrom($this->registerCode, $errors);
        $recoveryCode = UserAccessTemporalCodeRecoveryCodeVO::tryFrom($this->recoveryCode, $errors);
        $recoveryCodeExpiration = UserAccessTemporalCodeRecoveryCodeExpirationVO::tryFrom($this->recoveryCodeExpiration, $errors);
        $version = UserAccessTemporalCodeVersionVO::tryFrom($this->version, $errors);
        if ($errors->hasErrors()) {
            throw $errors->asConstraintException();
        }    return new UserAccessTemporalCode(
            uid: $uid,
            user: $user,
            tempSecondFactorSeed: $tempSecondFactorSeed,
            tempSecondFactorSeedExpiration: $tempSecondFactorSeedExpiration,
            failedLoginAttempts: $failedLoginAttempts,
            registerCode: $registerCode,
            recoveryCode: $recoveryCode,
            recoveryCodeExpiration: $recoveryCodeExpiration,
            version: $version,
        );
    }
    public function unset($field)
    {
        if (isset(self::UNSETS[$field])) {
            call_user_func([$this, self::UNSETS[$field]]);
        }
    }
    public function withAssertedRules(): UserAccessTemporalCodeAttributes
    {
        $value = new UserAccessTemporalCodeAttributes();
        $errorsList = new ConstraintFailList();
        $this->withAssertedUidRules($value, $errorsList);
        $this->withAssertedUserRules($value, $errorsList);
        $this->withAssertedTempSecondFactorSeedRules($value, $errorsList);
        $this->withAssertedTempSecondFactorSeedExpirationRules($value, $errorsList);
        $this->withAssertedFailedLoginAttemptsRules($value, $errorsList);
        $this->withAssertedRegisterCodeRules($value, $errorsList);
        $this->withAssertedRecoveryCodeRules($value, $errorsList);
        $this->withAssertedRecoveryCodeExpirationRules($value, $errorsList);
        $this->withAssertedVersionRules($value, $errorsList);
        if ($errorsList->hasErrors()) {
            throw $errorsList->asConstraintException();
        }
        return $value;
    }
    public function withDefaults(): UserAccessTemporalCodeAttributes
    {
        $this->withDefaultUid();
        $this->withDefaultUser();
        $this->withDefaultTempSecondFactorSeed();
        $this->withDefaultTempSecondFactorSeedExpiration();
        $this->withDefaultFailedLoginAttempts();
        $this->withDefaultRegisterCode();
        $this->withDefaultRecoveryCode();
        $this->withDefaultRecoveryCodeExpiration();
        $this->withDefaultVersion();
        return $this;
    }
}
