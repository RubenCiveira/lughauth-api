<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\User\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\User\Domain\ValueObject\UserRecoveryCodeVO;

trait UserRecoveryCodeAttributeHolder
{
    protected UserRecoveryCodeVO|string|null $recoveryCode = null;
    protected bool $recoveryCodeAssigned = false;

    public function getRecoveryCodeOrDefault(?UserRecoveryCodeVO $recoveryCode): UserRecoveryCodeVO|string|null
    {
        return $this->recoveryCodeAssigned ? ($this->recoveryCode !== null ? UserRecoveryCodeVO::from($this->recoveryCode) : null) : $recoveryCode;
    }
    public function recoveryCode(UserRecoveryCodeVO|string|null $recoveryCode): static
    {
        $this->recoveryCode = $recoveryCode;
        $this->recoveryCodeAssigned = true;
        return $this;
    }
    public function getRecoveryCode(): ?string
    {
        return is_a($this->recoveryCode, UserRecoveryCodeVO::class) ? $this->recoveryCode->value() : $this->recoveryCode;
    }
    public function unsetRecoveryCode(): static
    {
        $this->recoveryCode = null;
        $this->recoveryCodeAssigned = false;
        return $this;
    }
    protected function withDefaultRecoveryCode(): void
    {
    }
    protected function withAssertedRecoveryCodeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->recoveryCodeAssigned = $this->recoveryCodeAssigned) {
            $value->recoveryCode = UserRecoveryCodeVO::tryFrom($this->recoveryCode, $errorsList);
        }
    }
}
