<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\User\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\User\Domain\ValueObject\UserApprovedVO;

trait UserApprovedAttributeHolder
{
    protected UserApprovedVO|bool|null $approved = null;
    protected bool $approvedAssigned = false;

    public function getApprovedOrDefault(?UserApprovedVO $approved): ?UserApprovedVO
    {
        return $this->approvedAssigned ? ($this->approved !== null ? UserApprovedVO::from($this->approved) : null) : $approved;
    }
    public function approved(UserApprovedVO|bool|null $approved): static
    {
        $this->approved = $approved;
        $this->approvedAssigned = true;
        return $this;
    }
    public function getApproved(): ?bool
    {
        return is_a($this->approved, UserApprovedVO::class) ? $this->approved->value() : $this->approved;
    }
    public function unsetApproved(): static
    {
        $this->approved = null;
        $this->approvedAssigned = false;
        return $this;
    }
    protected function withDefaultApproved(): void
    {
        if ($this->approved === null) {
            $this->approved = true;
        }
    }
    protected function withAssertedApprovedRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->approvedAssigned = $this->approvedAssigned) {
            $value->approved = UserApprovedVO::tryFrom($this->approved, $errorsList);
        }
    }
}
