<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\User\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\User\Domain\ValueObject\UserLanguageVO;

trait UserLanguageAttributeHolder
{
    protected UserLanguageVO|string|null $language = null;
    protected bool $languageAssigned = false;

    public function getLanguageOrDefault(?UserLanguageVO $language): UserLanguageVO|string|null
    {
        return $this->languageAssigned ? ($this->language !== null ? UserLanguageVO::from($this->language) : null) : $language;
    }
    public function language(UserLanguageVO|string|null $language): static
    {
        $this->language = $language;
        $this->languageAssigned = true;
        return $this;
    }
    public function getLanguage(): ?string
    {
        return is_a($this->language, UserLanguageVO::class) ? $this->language->value() : $this->language;
    }
    public function unsetLanguage(): static
    {
        $this->language = null;
        $this->languageAssigned = false;
        return $this;
    }
    protected function withDefaultLanguage(): void
    {
    }
    protected function withAssertedLanguageRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->languageAssigned = $this->languageAssigned) {
            $value->language = UserLanguageVO::tryFrom($this->language, $errorsList);
        }
    }
}
