<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\User\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\User\Domain\ValueObject\UserRecoveryCodeExpirationVO;

trait UserRecoveryCodeExpirationAttributeHolder
{
    protected UserRecoveryCodeExpirationVO|\DateTimeImmutable|null $recoveryCodeExpiration = null;
    protected bool $recoveryCodeExpirationAssigned = false;

    public function getRecoveryCodeExpirationOrDefault(?UserRecoveryCodeExpirationVO $recoveryCodeExpiration): UserRecoveryCodeExpirationVO|\DateTimeImmutable|null
    {
        return $this->recoveryCodeExpirationAssigned ? ($this->recoveryCodeExpiration !== null ? UserRecoveryCodeExpirationVO::from($this->recoveryCodeExpiration) : null) : $recoveryCodeExpiration;
    }
    public function recoveryCodeExpiration(UserRecoveryCodeExpirationVO|\DateTimeImmutable|null $recoveryCodeExpiration): static
    {
        $this->recoveryCodeExpiration = $recoveryCodeExpiration;
        $this->recoveryCodeExpirationAssigned = true;
        return $this;
    }
    public function getRecoveryCodeExpiration(): ?\DateTimeImmutable
    {
        return is_a($this->recoveryCodeExpiration, UserRecoveryCodeExpirationVO::class) ? $this->recoveryCodeExpiration->value() : $this->recoveryCodeExpiration;
    }
    public function unsetRecoveryCodeExpiration(): static
    {
        $this->recoveryCodeExpiration = null;
        $this->recoveryCodeExpirationAssigned = false;
        return $this;
    }
    protected function withDefaultRecoveryCodeExpiration(): void
    {
    }
    protected function withAssertedRecoveryCodeExpirationRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->recoveryCodeExpirationAssigned = $this->recoveryCodeExpirationAssigned) {
            $value->recoveryCodeExpiration = UserRecoveryCodeExpirationVO::tryFrom($this->recoveryCodeExpiration, $errorsList);
        }
    }
}
