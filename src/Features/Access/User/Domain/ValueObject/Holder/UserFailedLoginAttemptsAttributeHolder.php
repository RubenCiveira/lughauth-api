<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\User\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\User\Domain\ValueObject\UserFailedLoginAttemptsVO;

trait UserFailedLoginAttemptsAttributeHolder
{
    protected UserFailedLoginAttemptsVO|int|null $failedLoginAttempts = null;
    protected bool $failedLoginAttemptsAssigned = false;

    public function getFailedLoginAttemptsOrDefault(?UserFailedLoginAttemptsVO $failedLoginAttempts): UserFailedLoginAttemptsVO|int|null
    {
        return $this->failedLoginAttemptsAssigned ? ($this->failedLoginAttempts !== null ? UserFailedLoginAttemptsVO::from($this->failedLoginAttempts) : null) : $failedLoginAttempts;
    }
    public function failedLoginAttempts(UserFailedLoginAttemptsVO|int|null $failedLoginAttempts): static
    {
        $this->failedLoginAttempts = $failedLoginAttempts;
        $this->failedLoginAttemptsAssigned = true;
        return $this;
    }
    public function getFailedLoginAttempts(): ?int
    {
        return is_a($this->failedLoginAttempts, UserFailedLoginAttemptsVO::class) ? $this->failedLoginAttempts->value() : $this->failedLoginAttempts;
    }
    public function unsetFailedLoginAttempts(): static
    {
        $this->failedLoginAttempts = null;
        $this->failedLoginAttemptsAssigned = false;
        return $this;
    }
    protected function withDefaultFailedLoginAttempts(): void
    {
        if ($this->failedLoginAttempts === null) {
            $this->failedLoginAttempts = 0;
        }
    }
    protected function withAssertedFailedLoginAttemptsRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->failedLoginAttemptsAssigned = $this->failedLoginAttemptsAssigned) {
            $value->failedLoginAttempts = UserFailedLoginAttemptsVO::tryFrom($this->failedLoginAttempts, $errorsList);
        }
    }
}
