<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\User\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\User\Domain\ValueObject\UserApproveVO;
use Civi\Lughauth\Features\Access\User\Domain\UserApproveOptions;

trait UserApproveAttributeHolder
{
    protected UserApproveVO|UserApproveOptions|null $approve = null;
    protected bool $approveAssigned = false;

    public function getApproveOrDefault(?UserApproveVO $approve): ?UserApproveVO
    {
        return $this->approveAssigned ? ($this->approve !== null ? UserApproveVO::from($this->approve) : null) : $approve;
    }
    public function approve(UserApproveVO|UserApproveOptions|null $approve): static
    {
        $this->approve = $approve;
        $this->approveAssigned = true;
        return $this;
    }
    public function getApprove(): ?UserApproveOptions
    {
        return is_a($this->approve, UserApproveVO::class) ? $this->approve->value() : $this->approve;
    }
    public function unsetApprove(): static
    {
        $this->approve = null;
        $this->approveAssigned = false;
        return $this;
    }
    protected function withDefaultApprove(): void
    {
        if ($this->approve === null) {
            $this->approve = UserApproveOptions::ACCEPTED;
        }
    }
    protected function withAssertedApproveRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->approveAssigned = $this->approveAssigned) {
            $value->approve = UserApproveVO::tryFrom($this->approve, $errorsList);
        }
    }
}
