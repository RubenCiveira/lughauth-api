<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Batch;

use Override;
use Civi\Lughauth\Shared\Infrastructure\LongTask\TaskContext;
use Civi\Lughauth\Shared\Infrastructure\LongTask\TaskReaderInterface;
use Civi\Lughauth\Shared\Infrastructure\LongTask\TaskWriterInterface;
use Civi\Lughauth\Shared\Infrastructure\LongTask\TaskDescriptorInterface;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Disable\SecurityDomainDisableUsecase;

class SecurityDomainTaskDisable implements TaskDescriptorInterface
{
    public function __construct(
        private readonly SecurityDomainTaskReader $reader,
        private readonly SecurityDomainDisableUsecase $usecase,
    ) {
    }

    #[Override]
    public function process(TaskContext $context, mixed $item): mixed
    {
        /** @var $item TenantAttributes */
        return $this->usecase->disable($item->getUid());
    }

    #[Override]
    public function init(TaskContext $initial): TaskContext
    {
        return $initial;
    }

    #[Override]
    public function finish(TaskContext $state)
    {
    }

    #[Override]
    public function describe(mixed $item): string
    {
        return $item->getName();
    }

    #[Override]
    public function reader(): TaskReaderInterface
    {
        return $this->reader;
    }

    #[Override]
    public function writer(): ?TaskWriterInterface
    {
        return null;
    }
}
