<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver;

use Override;
use Slim\Routing\RouteCollectorProxy;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainAllowController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainListController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainCreateController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainRetrieveController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainUpdateController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainDeleteController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainEnableController;
use Civi\Lughauth\Features\Access\SecurityDomain\Infrastructure\Driver\Rest\SecurityDomainDisableController;
use Civi\Lughauth\Shared\Infrastructure\MicroPlugin;
use Civi\Lughauth\Shared\Event\EventListenersRegistrarInterface;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Service\Visibility\SecurityDomainFilterProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\Create\IsAutenticatedCreateAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Create\SecurityDomainCreateAllowProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\Update\IsAutenticatedUpdateAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Update\SecurityDomainUpdateAllowProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\Retrieve\IsAutenticatedRetrieveAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Retrieve\SecurityDomainRetrieveAllowProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\List\IsAutenticatedListAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\List\SecurityDomainListAllowProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\Delete\IsAutenticatedDeleteAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Delete\SecurityDomainDeleteAllowProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\Enable\IsAutenticatedEnableAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Enable\SecurityDomainEnableAllowProposal;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Policy\Allow\Disable\IsAutenticatedDisableAllow;
use Civi\Lughauth\Features\Access\SecurityDomain\Application\Usecase\Disable\SecurityDomainDisableAllowProposal;

class SecurityDomainPlugin extends MicroPlugin
{
    #[Override]
    public function registerRoutes(RouteCollectorProxy $app)
    {
        $app->group('/api/access/security-domains', [$this, 'setRoutesForSecurityDomain']);
        $app->group('/api/me/acl/access/security-domains', [$this, 'setRoutesForSecurityDomainAcl']);
    }
    #[Override]
    public function registerEvents(EventListenersRegistrarInterface $bus)
    {
        $bus->registerListener(SecurityDomainCreateAllowProposal::class, IsAutenticatedCreateAllow::class);
        $bus->registerListener(SecurityDomainUpdateAllowProposal::class, IsAutenticatedUpdateAllow::class);
        $bus->registerListener(SecurityDomainRetrieveAllowProposal::class, IsAutenticatedRetrieveAllow::class);
        $bus->registerListener(SecurityDomainListAllowProposal::class, IsAutenticatedListAllow::class);
        $bus->registerListener(SecurityDomainDeleteAllowProposal::class, IsAutenticatedDeleteAllow::class);
        $bus->registerListener(SecurityDomainEnableAllowProposal::class, IsAutenticatedEnableAllow::class);
        $bus->registerListener(SecurityDomainDisableAllowProposal::class, IsAutenticatedDisableAllow::class);
    }
    public function setRoutesForSecurityDomainAcl(RouteCollectorProxy $securityDomainGroup)
    {
        $securityDomainGroup->get('', [SecurityDomainAllowController::class, 'genericAllow']);
        $securityDomainGroup->get('/{uid}', [SecurityDomainAllowController::class, 'contextualAllow']);
    }
    public function setRoutesForSecurityDomain(RouteCollectorProxy $securityDomainGroup)
    {
        $securityDomainGroup->get('', [SecurityDomainListController::class, 'list']);
        $securityDomainGroup->post('', [SecurityDomainCreateController::class, 'create']);
        $securityDomainGroup->get('/{uid}', [SecurityDomainRetrieveController::class, 'retrieve']);
        $securityDomainGroup->put('/{uid}', [SecurityDomainUpdateController::class, 'update']);
        $securityDomainGroup->delete('/{uid}', [SecurityDomainDeleteController::class, 'delete']);
        $securityDomainGroup->delete('', [SecurityDomainDeleteController::class, 'deleteAllForQuery']);
        $securityDomainGroup->get('/~/delete-status/{uid}', [SecurityDomainDeleteController::class, 'checkDeleteAllForQueryStatus']);
        $securityDomainGroup->patch('/~/enable', [SecurityDomainEnableController::class, 'enableAllForQuery']);
        $securityDomainGroup->patch('/{uid}/enable', [SecurityDomainEnableController::class, 'enable']);
        $securityDomainGroup->get('/~/enable-status/{uid}', [SecurityDomainEnableController::class, 'checkEnableAllForQueryStatus']);
        $securityDomainGroup->patch('/~/disable', [SecurityDomainDisableController::class, 'disableAllForQuery']);
        $securityDomainGroup->patch('/{uid}/disable', [SecurityDomainDisableController::class, 'disable']);
        $securityDomainGroup->get('/~/disable-status/{uid}', [SecurityDomainDisableController::class, 'checkDisableAllForQueryStatus']);
    }
}
