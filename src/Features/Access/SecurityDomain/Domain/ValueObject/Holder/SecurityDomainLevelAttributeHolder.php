<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainLevelVO;

trait SecurityDomainLevelAttributeHolder
{
    protected SecurityDomainLevelVO|int|null $level = null;
    protected bool $levelAssigned = false;

    public function getLevelOrDefault(?SecurityDomainLevelVO $level): ?SecurityDomainLevelVO
    {
        return $this->levelAssigned ? ($this->level !== null ? SecurityDomainLevelVO::from($this->level) : null) : $level;
    }
    public function level(SecurityDomainLevelVO|int|null $level): static
    {
        $this->level = $level;
        $this->levelAssigned = true;
        return $this;
    }
    public function getLevel(): ?int
    {
        return is_a($this->level, SecurityDomainLevelVO::class) ? $this->level->value() : $this->level;
    }
    public function unsetLevel(): static
    {
        $this->level = null;
        $this->levelAssigned = false;
        return $this;
    }
    protected function withDefaultLevel(): void
    {
    }
    protected function withAssertedLevelRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->levelAssigned = $this->levelAssigned) {
            $value->level = SecurityDomainLevelVO::tryFrom($this->level, $errorsList);
        }
    }
}
