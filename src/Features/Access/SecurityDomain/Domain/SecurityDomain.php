<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityDomain\Domain;

use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainUidVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainNameVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainNameAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainLevelVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainLevelAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainReadAllVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainReadAllAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainWriteAllVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainWriteAllAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainManageAllVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainManageAllAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainViewAllAttributesVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainViewAllAttributesAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainModificaAllAttributesVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainModificaAllAttributesAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainEnabledVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainEnabledAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\SecurityDomainVersionVO;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\ValueObject\Accesor\SecurityDomainVersionAccesor;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\Formula\EnabledCalculator;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\Event\SecurityDomainCreateEvent;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\Event\SecurityDomainUpdateEvent;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\Event\SecurityDomainDeleteEvent;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\Event\SecurityDomainEnableEvent;
use Civi\Lughauth\Features\Access\SecurityDomain\Domain\Event\SecurityDomainDisableEvent;

class SecurityDomain extends SecurityDomainRef
{
    use SecurityDomainNameAccesor;
    use SecurityDomainLevelAccesor;
    use SecurityDomainReadAllAccesor;
    use SecurityDomainWriteAllAccesor;
    use SecurityDomainManageAllAccesor;
    use SecurityDomainViewAllAttributesAccesor;
    use SecurityDomainModificaAllAttributesAccesor;
    use SecurityDomainEnabledAccesor;
    use SecurityDomainVersionAccesor;
    private array $recordedEvents = [];

    public function __construct(
        SecurityDomainUidVO|string $uid,
        SecurityDomainNameVO|string $name,
        SecurityDomainLevelVO|int $level,
        SecurityDomainReadAllVO|bool|null $readAll = null,
        SecurityDomainWriteAllVO|bool|null $writeAll = null,
        SecurityDomainManageAllVO|bool|null $manageAll = null,
        SecurityDomainViewAllAttributesVO|bool|null $viewAllAttributes = null,
        SecurityDomainModificaAllAttributesVO|bool|null $modificaAllAttributes = null,
        SecurityDomainEnabledVO|bool|null $enabled = null,
        SecurityDomainVersionVO|int|null $version = null,
    ) {
        parent::__construct($uid);
        $this->_name = SecurityDomainNameVO::from($name);
        $this->_level = SecurityDomainLevelVO::from($level);
        $this->_readAll = null === $readAll ? SecurityDomainReadAllVO::empty() : SecurityDomainReadAllVO::from($readAll);
        $this->_writeAll = null === $writeAll ? SecurityDomainWriteAllVO::empty() : SecurityDomainWriteAllVO::from($writeAll);
        $this->_manageAll = null === $manageAll ? SecurityDomainManageAllVO::empty() : SecurityDomainManageAllVO::from($manageAll);
        $this->_viewAllAttributes = null === $viewAllAttributes ? SecurityDomainViewAllAttributesVO::empty() : SecurityDomainViewAllAttributesVO::from($viewAllAttributes);
        $this->_modificaAllAttributes = null === $modificaAllAttributes ? SecurityDomainModificaAllAttributesVO::empty() : SecurityDomainModificaAllAttributesVO::from($modificaAllAttributes);
        $this->_enabled = null === $enabled ? SecurityDomainEnabledVO::empty() : SecurityDomainEnabledVO::from($enabled);
        $this->_version = null === $version ? SecurityDomainVersionVO::empty() : SecurityDomainVersionVO::from($version);
    }
    public function replace(SecurityDomainAttributes $values): SecurityDomain
    {
        $value = clone $this;
        $value->_name = $values->getNameOrDefault($this->_name);
        $value->_level = $values->getLevelOrDefault($this->_level);
        $value->_readAll = $values->getReadAllOrDefault($this->_readAll);
        $value->_writeAll = $values->getWriteAllOrDefault($this->_writeAll);
        $value->_manageAll = $values->getManageAllOrDefault($this->_manageAll);
        $value->_viewAllAttributes = $values->getViewAllAttributesOrDefault($this->_viewAllAttributes);
        $value->_modificaAllAttributes = $values->getModificaAllAttributesOrDefault($this->_modificaAllAttributes);
        $value->_enabled = $values->getEnabledOrDefault($this->_enabled);
        $value->_version = $values->getVersionOrDefault($this->_version);
        return $value;
    }
    public static function calculatedFields(): array
    {
        return [ 'enabled'];
    }
    public static function create(SecurityDomainAttributes $values): SecurityDomain
    {
        $calculated = clone $values;
        $calculated->enabled(EnabledCalculator::calculateEnabled());
        $value = $calculated->build();
        $value->recordedEvents[] = new SecurityDomainCreateEvent($value);
        return $value;
    }
    public function update(SecurityDomainAttributes $values): SecurityDomain
    {
        $calculated = clone $values;
        $calculated->enabled(EnabledCalculator::calculateEnabled($this));
        $value = $this->replace($calculated);
        $value->recordedEvents[] = new SecurityDomainUpdateEvent($value);
        return $value;
    }
    public function delete(): SecurityDomain
    {
        $value = clone $this;
        $value->recordedEvents[] = new SecurityDomainDeleteEvent($value);
        return $value;
    }
    public function enable(): SecurityDomain
    {
        $value = clone $this;
        $value->_enabled = SecurityDomainEnabledVO::from(true);
        $value->recordedEvents[] = new SecurityDomainEnableEvent(payload: $value);
        return $value;
    }
    public function disable(): SecurityDomain
    {
        $value = clone $this;
        $value->_enabled = SecurityDomainEnabledVO::from(false);
        $value->recordedEvents[] = new SecurityDomainDisableEvent(payload: $value);
        return $value;
    }
    public function toAttributes(): SecurityDomainAttributes
    {
        return (new SecurityDomainAttributes())
          ->uid($this->uid())
          ->name($this->_name)
          ->level($this->_level)
          ->readAll($this->_readAll)
          ->writeAll($this->_writeAll)
          ->manageAll($this->_manageAll)
          ->viewAllAttributes($this->_viewAllAttributes)
          ->modificaAllAttributes($this->_modificaAllAttributes)
          ->enabled($this->_enabled)
          ->version($this->_version);
    }
    public function getTheEvents(): array
    {
        return [...$this->recordedEvents];
    }
}
