<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TenantConfig\Domain;

use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\TenantConfigUidVO;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\TenantConfigTenantVO;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\Accesor\TenantConfigTenantAccesor;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\TenantConfigInnerLabelVO;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\Accesor\TenantConfigInnerLabelAccesor;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\TenantConfigForceMfaVO;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\Accesor\TenantConfigForceMfaAccesor;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\TenantConfigVersionVO;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\Accesor\TenantConfigVersionAccesor;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\Event\TenantConfigCreateEvent;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\Event\TenantConfigUpdateEvent;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\Event\TenantConfigDeleteEvent;
use Civi\Lughauth\Features\Access\Tenant\Domain\TenantRef;

class TenantConfig extends TenantConfigRef
{
    use TenantConfigTenantAccesor;
    use TenantConfigInnerLabelAccesor;
    use TenantConfigForceMfaAccesor;
    use TenantConfigVersionAccesor;
    private array $recordedEvents = [];

    public function __construct(
        TenantConfigUidVO|string $uid,
        TenantConfigTenantVO|TenantRef $tenant,
        TenantConfigForceMfaVO|bool $forceMfa,
        TenantConfigInnerLabelVO|string|null $innerLabel = null,
        TenantConfigVersionVO|int|null $version = null,
    ) {
        parent::__construct($uid);
        $this->_tenant = TenantConfigTenantVO::from($tenant);
        $this->_innerLabel = null === $innerLabel ? TenantConfigInnerLabelVO::empty() : TenantConfigInnerLabelVO::from($innerLabel);
        $this->_forceMfa = TenantConfigForceMfaVO::from($forceMfa);
        $this->_version = null === $version ? TenantConfigVersionVO::empty() : TenantConfigVersionVO::from($version);
    }
    public function replace(TenantConfigAttributes $values): TenantConfig
    {
        $value = clone $this;
        $value->_tenant = $values->getTenantOrDefault($this->_tenant);
        $value->_innerLabel = $values->getInnerLabelOrDefault($this->_innerLabel);
        $value->_forceMfa = $values->getForceMfaOrDefault($this->_forceMfa);
        $value->_version = $values->getVersionOrDefault($this->_version);
        return $value;
    }
    public static function calculatedFields(): array
    {
        return [];
    }
    public static function create(TenantConfigAttributes $values): TenantConfig
    {
        $value = $values->build();
        $value->recordedEvents[] = new TenantConfigCreateEvent($value);
        return $value;
    }
    public function update(TenantConfigAttributes $values): TenantConfig
    {
        $value = $this->replace($values);
        $value->recordedEvents[] = new TenantConfigUpdateEvent($value);
        return $value;
    }
    public function delete(): TenantConfig
    {
        $value = clone $this;
        $value->recordedEvents[] = new TenantConfigDeleteEvent($value);
        return $value;
    }
    public function toAttributes(): TenantConfigAttributes
    {
        return (new TenantConfigAttributes())
          ->uid($this->uid())
          ->tenant($this->_tenant)
          ->innerLabel($this->_innerLabel)
          ->forceMfa($this->_forceMfa)
          ->version($this->_version);
    }
    public function getTheEvents(): array
    {
        return [...$this->recordedEvents];
    }
}
