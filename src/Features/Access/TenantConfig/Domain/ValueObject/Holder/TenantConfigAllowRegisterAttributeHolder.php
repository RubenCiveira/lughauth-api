<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\TenantConfig\Domain\ValueObject\TenantConfigAllowRegisterVO;

trait TenantConfigAllowRegisterAttributeHolder
{
    protected TenantConfigAllowRegisterVO|bool|null $allowRegister = null;
    protected bool $allowRegisterAssigned = false;

    public function getAllowRegisterOrDefault(?TenantConfigAllowRegisterVO $allowRegister): ?TenantConfigAllowRegisterVO
    {
        return $this->allowRegisterAssigned ? ($this->allowRegister !== null ? TenantConfigAllowRegisterVO::from($this->allowRegister) : null) : $allowRegister;
    }
    public function allowRegister(TenantConfigAllowRegisterVO|bool|null $allowRegister): static
    {
        $this->allowRegister = $allowRegister;
        $this->allowRegisterAssigned = true;
        return $this;
    }
    public function isAllowRegister(): ?bool
    {
        return is_a($this->allowRegister, TenantConfigAllowRegisterVO::class) ? $this->allowRegister->value() : $this->allowRegister;
    }
    public function unsetAllowRegister(): static
    {
        $this->allowRegister = null;
        $this->allowRegisterAssigned = false;
        return $this;
    }
    protected function withDefaultAllowRegister(): void
    {
        if ($this->allowRegister === null) {
            $this->allowRegister = true;
        }
    }
    protected function withAssertedAllowRegisterRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->allowRegisterAssigned = $this->allowRegisterAssigned) {
            $value->allowRegister = TenantConfigAllowRegisterVO::tryFrom($this->allowRegister, $errorsList);
        }
    }
}
