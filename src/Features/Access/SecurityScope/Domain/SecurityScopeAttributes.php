<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityScope\Domain;

use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeUidAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeUidVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeTrustedClientAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeTrustedClientVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeRelyingPartyAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeRelyingPartyVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeResourceAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeResourceVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeScopeAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeScopeVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeEnabledAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeEnabledVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeKindAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeKindVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeVisibilityAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeVisibilityVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder\SecurityScopeVersionAttributeHolder;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeVersionVO;
use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;

class SecurityScopeAttributes
{
    use SecurityScopeUidAttributeHolder;
    use SecurityScopeTrustedClientAttributeHolder;
    use SecurityScopeRelyingPartyAttributeHolder;
    use SecurityScopeResourceAttributeHolder;
    use SecurityScopeScopeAttributeHolder;
    use SecurityScopeEnabledAttributeHolder;
    use SecurityScopeKindAttributeHolder;
    use SecurityScopeVisibilityAttributeHolder;
    use SecurityScopeVersionAttributeHolder;

    private const UNSETS = [
      'uid' => 'unsetUid',
      'trustedClient' => 'unsetTrustedClient',
      'relyingParty' => 'unsetRelyingParty',
      'resource' => 'unsetResource',
      'scope' => 'unsetScope',
      'enabled' => 'unsetEnabled',
      'kind' => 'unsetKind',
      'visibility' => 'unsetVisibility',
      'version' => 'unsetVersion',
    ];

    public function build(): SecurityScope
    {
        $errors = new ConstraintFailList();
        $uid = SecurityScopeUidVO::tryFrom($this->uid, $errors);
        $trustedClient = SecurityScopeTrustedClientVO::tryFrom($this->trustedClient, $errors);
        $relyingParty = SecurityScopeRelyingPartyVO::tryFrom($this->relyingParty, $errors);
        $resource = SecurityScopeResourceVO::tryFrom($this->resource, $errors);
        $scope = SecurityScopeScopeVO::tryFrom($this->scope, $errors);
        $enabled = SecurityScopeEnabledVO::tryFrom($this->enabled, $errors);
        $kind = SecurityScopeKindVO::tryFrom($this->kind, $errors);
        $visibility = SecurityScopeVisibilityVO::tryFrom($this->visibility, $errors);
        $version = SecurityScopeVersionVO::tryFrom($this->version, $errors);
        if ($errors->hasErrors()) {
            throw $errors->asConstraintException();
        }    return new SecurityScope(
            uid: $uid,
            trustedClient: $trustedClient,
            relyingParty: $relyingParty,
            resource: $resource,
            scope: $scope,
            enabled: $enabled,
            kind: $kind,
            visibility: $visibility,
            version: $version,
        );
    }
    public function unset($field)
    {
        if (isset(self::UNSETS[$field])) {
            call_user_func([$this, self::UNSETS[$field]]);
        }
    }
    public function withAssertedRules(): SecurityScopeAttributes
    {
        $value = new SecurityScopeAttributes();
        $errorsList = new ConstraintFailList();
        $this->withAssertedUidRules($value, $errorsList);
        $this->withAssertedTrustedClientRules($value, $errorsList);
        $this->withAssertedRelyingPartyRules($value, $errorsList);
        $this->withAssertedResourceRules($value, $errorsList);
        $this->withAssertedScopeRules($value, $errorsList);
        $this->withAssertedEnabledRules($value, $errorsList);
        $this->withAssertedKindRules($value, $errorsList);
        $this->withAssertedVisibilityRules($value, $errorsList);
        $this->withAssertedVersionRules($value, $errorsList);
        if ($errorsList->hasErrors()) {
            throw $errorsList->asConstraintException();
        }
        return $value;
    }
    public function withDefaults(): SecurityScopeAttributes
    {
        $this->withDefaultUid();
        $this->withDefaultTrustedClient();
        $this->withDefaultRelyingParty();
        $this->withDefaultResource();
        $this->withDefaultScope();
        $this->withDefaultEnabled();
        $this->withDefaultKind();
        $this->withDefaultVisibility();
        $this->withDefaultVersion();
        return $this;
    }
}
