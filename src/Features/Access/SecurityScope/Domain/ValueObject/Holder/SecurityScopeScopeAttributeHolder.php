<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeScopeVO;

trait SecurityScopeScopeAttributeHolder
{
    protected SecurityScopeScopeVO|string|null $scope = null;
    protected bool $scopeAssigned = false;

    public function getScopeOrDefault(?SecurityScopeScopeVO $scope): SecurityScopeScopeVO|string|null
    {
        return $this->scopeAssigned ? ($this->scope !== null ? SecurityScopeScopeVO::from($this->scope) : null) : $scope;
    }
    public function scope(SecurityScopeScopeVO|string|null $scope): static
    {
        $this->scope = $scope;
        $this->scopeAssigned = true;
        return $this;
    }
    public function getScope(): ?string
    {
        return is_a($this->scope, SecurityScopeScopeVO::class) ? $this->scope->value() : $this->scope;
    }
    public function unsetScope(): static
    {
        $this->scope = null;
        $this->scopeAssigned = false;
        return $this;
    }
    protected function withDefaultScope(): void
    {
    }
    protected function withAssertedScopeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->scopeAssigned = $this->scopeAssigned) {
            $value->scope = SecurityScopeScopeVO::tryFrom($this->scope, $errorsList);
        }
    }
}
