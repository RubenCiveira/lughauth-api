<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\ValueObject\SecurityScopeResourceVO;

trait SecurityScopeResourceAttributeHolder
{
    protected SecurityScopeResourceVO|string|null $resource = null;
    protected bool $resourceAssigned = false;

    public function getResourceOrDefault(?SecurityScopeResourceVO $resource): SecurityScopeResourceVO|string|null
    {
        return $this->resourceAssigned ? ($this->resource !== null ? SecurityScopeResourceVO::from($this->resource) : null) : $resource;
    }
    public function resource(SecurityScopeResourceVO|string|null $resource): static
    {
        $this->resource = $resource;
        $this->resourceAssigned = true;
        return $this;
    }
    public function getResource(): ?string
    {
        return is_a($this->resource, SecurityScopeResourceVO::class) ? $this->resource->value() : $this->resource;
    }
    public function unsetResource(): static
    {
        $this->resource = null;
        $this->resourceAssigned = false;
        return $this;
    }
    protected function withDefaultResource(): void
    {
    }
    protected function withAssertedResourceRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->resourceAssigned = $this->resourceAssigned) {
            $value->resource = SecurityScopeResourceVO::tryFrom($this->resource, $errorsList);
        }
    }
}
