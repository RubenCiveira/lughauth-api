<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TenantLoginProvider\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\TenantLoginProvider\Domain\ValueObject\TenantLoginProviderPublicKeyVO;

trait TenantLoginProviderPublicKeyAttributeHolder
{
    protected TenantLoginProviderPublicKeyVO|string|null $publicKey = null;
    protected bool $publicKeyAssigned = false;

    public function getPublicKeyOrDefault(?TenantLoginProviderPublicKeyVO $publicKey): TenantLoginProviderPublicKeyVO|string|null
    {
        return $this->publicKeyAssigned ? ($this->publicKey !== null ? TenantLoginProviderPublicKeyVO::from($this->publicKey) : null) : $publicKey;
    }
    public function publicKey(TenantLoginProviderPublicKeyVO|string|null $publicKey): static
    {
        $this->publicKey = $publicKey;
        $this->publicKeyAssigned = true;
        return $this;
    }
    public function getPublicKey(): ?string
    {
        return is_a($this->publicKey, TenantLoginProviderPublicKeyVO::class) ? $this->publicKey->value() : $this->publicKey;
    }
    public function unsetPublicKey(): static
    {
        $this->publicKey = null;
        $this->publicKeyAssigned = false;
        return $this;
    }
    protected function withDefaultPublicKey(): void
    {
    }
    protected function withAssertedPublicKeyRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->publicKeyAssigned = $this->publicKeyAssigned) {
            $value->publicKey = TenantLoginProviderPublicKeyVO::tryFrom($this->publicKey, $errorsList);
        }
    }
}
