<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TenantLoginProvider\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\TenantLoginProvider\Domain\ValueObject\TenantLoginProviderMetadataVO;

trait TenantLoginProviderMetadataAttributeHolder
{
    protected TenantLoginProviderMetadataVO|string|null $metadata = null;
    protected bool $metadataAssigned = false;

    public function getMetadataOrDefault(?TenantLoginProviderMetadataVO $metadata): ?TenantLoginProviderMetadataVO
    {
        return $this->metadataAssigned ? ($this->metadata !== null ? TenantLoginProviderMetadataVO::from($this->metadata) : null) : $metadata;
    }
    public function metadata(TenantLoginProviderMetadataVO|string|null $metadata): static
    {
        $this->metadata = $metadata;
        $this->metadataAssigned = true;
        return $this;
    }
    public function getMetadata(): ?string
    {
        return is_a($this->metadata, TenantLoginProviderMetadataVO::class) ? $this->metadata->value() : $this->metadata;
    }
    public function unsetMetadata(): static
    {
        $this->metadata = null;
        $this->metadataAssigned = false;
        return $this;
    }
    protected function withDefaultMetadata(): void
    {
    }
    protected function withAssertedMetadataRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->metadataAssigned = $this->metadataAssigned) {
            $value->metadata = TenantLoginProviderMetadataVO::tryFrom($this->metadata, $errorsList);
        }
    }
}
