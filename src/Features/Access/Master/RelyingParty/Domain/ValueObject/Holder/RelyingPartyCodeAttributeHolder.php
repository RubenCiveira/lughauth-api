<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\RelyingParty\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\RelyingParty\Domain\ValueObject\RelyingPartyCodeVO;

trait RelyingPartyCodeAttributeHolder
{
    protected RelyingPartyCodeVO|string|null $code = null;
    protected bool $codeAssigned = false;

    public function getCodeOrDefault(?RelyingPartyCodeVO $code): ?RelyingPartyCodeVO
    {
        return $this->codeAssigned ? ($this->code !== null ? RelyingPartyCodeVO::from($this->code) : null) : $code;
    }
    public function code(RelyingPartyCodeVO|string|null $code): static
    {
        $this->code = $code;
        $this->codeAssigned = true;
        return $this;
    }
    public function getCode(): ?string
    {
        return is_a($this->code, RelyingPartyCodeVO::class) ? $this->code->value() : $this->code;
    }
    public function unsetCode(): static
    {
        $this->code = null;
        $this->codeAssigned = false;
        return $this;
    }
    protected function withDefaultCode(): void
    {
    }
    protected function withAssertedCodeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->codeAssigned = $this->codeAssigned) {
            $value->code = RelyingPartyCodeVO::tryFrom($this->code, $errorsList);
        }
    }
}
