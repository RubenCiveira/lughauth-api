<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\TrustedClient\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\TrustedClient\Domain\ValueObject\TrustedClientAllowedRedirectsVO;
use Civi\Lughauth\Features\Access\Master\TrustedClient\Domain\ValueObject\TrustedClientAllowedRedirectsListRef;

trait TrustedClientAllowedRedirectsAttributeHolder
{
    protected TrustedClientAllowedRedirectsVO|TrustedClientAllowedRedirectsListRef| array |null $allowedRedirects = null;
    protected bool $allowedRedirectsAssigned = false;

    public function getAllowedRedirectsOrDefault(?TrustedClientAllowedRedirectsVO $allowedRedirects): ?TrustedClientAllowedRedirectsVO
    {
        if ($this->allowedRedirectsAssigned && $allowedRedirects) {
            return TrustedClientAllowedRedirectsVO::from($this->allowedRedirects)->getWithDefaults($allowedRedirects);
        } elseif ($this->allowedRedirectsAssigned) {
            return TrustedClientAllowedRedirectsVO::from($this->allowedRedirects);
        } else {
            return $allowedRedirects;
        }
    }
    public function allowedRedirects(TrustedClientAllowedRedirectsVO|TrustedClientAllowedRedirectsListRef| array |null $allowedRedirects): static
    {
        $this->allowedRedirects = $allowedRedirects;
        $this->allowedRedirectsAssigned = true;
        return $this;
    }
    public function getAllowedRedirects(): ?TrustedClientAllowedRedirectsListRef
    {
        return is_a($this->allowedRedirects, TrustedClientAllowedRedirectsVO::class) ? $this->allowedRedirects->value() : $this->allowedRedirects;
    }
    public function unsetAllowedRedirects(): static
    {
        $this->allowedRedirects = null;
        $this->allowedRedirectsAssigned = false;
        return $this;
    }
    protected function withDefaultAllowedRedirects(): void
    {
    }
    protected function withAssertedAllowedRedirectsRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->allowedRedirectsAssigned = $this->allowedRedirectsAssigned) {
            $value->allowedRedirects = TrustedClientAllowedRedirectsVO::tryFrom($this->allowedRedirects, $errorsList);
        }
    }
}
