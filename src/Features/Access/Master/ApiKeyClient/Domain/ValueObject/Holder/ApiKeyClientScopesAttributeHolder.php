<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\ApiKeyClient\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\ApiKeyClient\Domain\ValueObject\ApiKeyClientScopesVO;

trait ApiKeyClientScopesAttributeHolder
{
    protected ApiKeyClientScopesVO|string|null $scopes = null;
    protected bool $scopesAssigned = false;

    public function getScopesOrDefault(?ApiKeyClientScopesVO $scopes): ?ApiKeyClientScopesVO
    {
        return $this->scopesAssigned ? ($this->scopes !== null ? ApiKeyClientScopesVO::from($this->scopes) : null) : $scopes;
    }
    public function scopes(ApiKeyClientScopesVO|string|null $scopes): static
    {
        $this->scopes = $scopes;
        $this->scopesAssigned = true;
        return $this;
    }
    public function getScopes(): ?string
    {
        return is_a($this->scopes, ApiKeyClientScopesVO::class) ? $this->scopes->value() : $this->scopes;
    }
    public function unsetScopes(): static
    {
        $this->scopes = null;
        $this->scopesAssigned = false;
        return $this;
    }
    protected function withDefaultScopes(): void
    {
    }
    protected function withAssertedScopesRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->scopesAssigned = $this->scopesAssigned) {
            $value->scopes = ApiKeyClientScopesVO::tryFrom($this->scopes, $errorsList);
        }
    }
}
