<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\TenantPartySecurity\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\TenantPartySecurity\Domain\ValueObject\TenantPartySecurityRelyingPartyVO;
use Civi\Lughauth\Features\Access\Master\RelyingParty\Domain\RelyingPartyRef;

trait TenantPartySecurityRelyingPartyAttributeHolder
{
    protected TenantPartySecurityRelyingPartyVO|RelyingPartyRef|null $relyingParty = null;
    protected bool $relyingPartyAssigned = false;

    public function getRelyingPartyOrDefault(?TenantPartySecurityRelyingPartyVO $relyingParty): ?TenantPartySecurityRelyingPartyVO
    {
        return $this->relyingPartyAssigned ? ($this->relyingParty !== null ? TenantPartySecurityRelyingPartyVO::from($this->relyingParty) : null) : $relyingParty;
    }
    public function relyingParty(TenantPartySecurityRelyingPartyVO|RelyingPartyRef|null $relyingParty): static
    {
        $this->relyingParty = $relyingParty;
        $this->relyingPartyAssigned = true;
        return $this;
    }
    public function getRelyingParty(): ?RelyingPartyRef
    {
        return is_a($this->relyingParty, TenantPartySecurityRelyingPartyVO::class) ? $this->relyingParty->value() : $this->relyingParty;
    }
    public function unsetRelyingParty(): static
    {
        $this->relyingParty = null;
        $this->relyingPartyAssigned = false;
        return $this;
    }
    protected function withDefaultRelyingParty(): void
    {
    }
    protected function withAssertedRelyingPartyRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->relyingPartyAssigned = $this->relyingPartyAssigned) {
            $value->relyingParty = TenantPartySecurityRelyingPartyVO::tryFrom($this->relyingParty, $errorsList);
        }
    }
}
