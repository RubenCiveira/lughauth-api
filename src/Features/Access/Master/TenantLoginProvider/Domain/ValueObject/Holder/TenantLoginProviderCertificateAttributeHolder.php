<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\TenantLoginProvider\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\TenantLoginProvider\Domain\ValueObject\TenantLoginProviderCertificateVO;

trait TenantLoginProviderCertificateAttributeHolder
{
    protected TenantLoginProviderCertificateVO|string|null $certificate = null;
    protected bool $certificateAssigned = false;

    public function getCertificateOrDefault(?TenantLoginProviderCertificateVO $certificate): ?TenantLoginProviderCertificateVO
    {
        return $this->certificateAssigned ? ($this->certificate !== null ? TenantLoginProviderCertificateVO::from($this->certificate) : null) : $certificate;
    }
    public function certificate(TenantLoginProviderCertificateVO|string|null $certificate): static
    {
        $this->certificate = $certificate;
        $this->certificateAssigned = true;
        return $this;
    }
    public function getCertificate(): ?string
    {
        return is_a($this->certificate, TenantLoginProviderCertificateVO::class) ? $this->certificate->value() : $this->certificate;
    }
    public function unsetCertificate(): static
    {
        $this->certificate = null;
        $this->certificateAssigned = false;
        return $this;
    }
    protected function withDefaultCertificate(): void
    {
    }
    protected function withAssertedCertificateRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->certificateAssigned = $this->certificateAssigned) {
            $value->certificate = TenantLoginProviderCertificateVO::tryFrom($this->certificate, $errorsList);
        }
    }
}
