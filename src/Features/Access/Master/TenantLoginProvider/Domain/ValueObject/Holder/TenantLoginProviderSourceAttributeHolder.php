<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\TenantLoginProvider\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\TenantLoginProvider\Domain\ValueObject\TenantLoginProviderSourceVO;
use Civi\Lughauth\Features\Access\Master\TenantLoginProvider\Domain\TenantLoginProviderSourceOptions;

trait TenantLoginProviderSourceAttributeHolder
{
    protected TenantLoginProviderSourceVO|TenantLoginProviderSourceOptions|null $source = null;
    protected bool $sourceAssigned = false;

    public function getSourceOrDefault(?TenantLoginProviderSourceVO $source): ?TenantLoginProviderSourceVO
    {
        return $this->sourceAssigned ? ($this->source !== null ? TenantLoginProviderSourceVO::from($this->source) : null) : $source;
    }
    public function source(TenantLoginProviderSourceVO|TenantLoginProviderSourceOptions|null $source): static
    {
        $this->source = $source;
        $this->sourceAssigned = true;
        return $this;
    }
    public function getSource(): ?TenantLoginProviderSourceOptions
    {
        return is_a($this->source, TenantLoginProviderSourceVO::class) ? $this->source->value() : $this->source;
    }
    public function unsetSource(): static
    {
        $this->source = null;
        $this->sourceAssigned = false;
        return $this;
    }
    protected function withDefaultSource(): void
    {
    }
    protected function withAssertedSourceRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->sourceAssigned = $this->sourceAssigned) {
            $value->source = TenantLoginProviderSourceVO::tryFrom($this->source, $errorsList);
        }
    }
}
