<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Master\UserAccessTemporalCode\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Master\UserAccessTemporalCode\Domain\ValueObject\UserAccessTemporalCodeRecoveryCodeVO;

trait UserAccessTemporalCodeRecoveryCodeAttributeHolder
{
    protected UserAccessTemporalCodeRecoveryCodeVO|string|null $recoveryCode = null;
    protected bool $recoveryCodeAssigned = false;

    public function getRecoveryCodeOrDefault(?UserAccessTemporalCodeRecoveryCodeVO $recoveryCode): ?UserAccessTemporalCodeRecoveryCodeVO
    {
        return $this->recoveryCodeAssigned ? ($this->recoveryCode !== null ? UserAccessTemporalCodeRecoveryCodeVO::from($this->recoveryCode) : null) : $recoveryCode;
    }
    public function recoveryCode(UserAccessTemporalCodeRecoveryCodeVO|string|null $recoveryCode): static
    {
        $this->recoveryCode = $recoveryCode;
        $this->recoveryCodeAssigned = true;
        return $this;
    }
    public function getRecoveryCode(): ?string
    {
        return is_a($this->recoveryCode, UserAccessTemporalCodeRecoveryCodeVO::class) ? $this->recoveryCode->value() : $this->recoveryCode;
    }
    public function unsetRecoveryCode(): static
    {
        $this->recoveryCode = null;
        $this->recoveryCodeAssigned = false;
        return $this;
    }
    protected function withDefaultRecoveryCode(): void
    {
    }
    protected function withAssertedRecoveryCodeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->recoveryCodeAssigned = $this->recoveryCodeAssigned) {
            $value->recoveryCode = UserAccessTemporalCodeRecoveryCodeVO::tryFrom($this->recoveryCode, $errorsList);
        }
    }
}
