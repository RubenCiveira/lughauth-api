<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\ScopeAssignation\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\ScopeAssignation\Domain\ValueObject\ScopeAssignationSecurityScopeVO;
use Civi\Lughauth\Features\Access\SecurityScope\Domain\SecurityScopeRef;

trait ScopeAssignationSecurityScopeAttributeHolder
{
    protected ScopeAssignationSecurityScopeVO|SecurityScopeRef|null $securityScope = null;
    protected bool $securityScopeAssigned = false;

    public function getSecurityScopeOrDefault(?ScopeAssignationSecurityScopeVO $securityScope): ScopeAssignationSecurityScopeVO|SecurityScopeRef|null
    {
        return $this->securityScopeAssigned ? ($this->securityScope !== null ? ScopeAssignationSecurityScopeVO::from($this->securityScope) : null) : $securityScope;
    }
    public function securityScope(ScopeAssignationSecurityScopeVO|SecurityScopeRef|null $securityScope): static
    {
        $this->securityScope = $securityScope;
        $this->securityScopeAssigned = true;
        return $this;
    }
    public function getSecurityScope(): ?SecurityScopeRef
    {
        return is_a($this->securityScope, ScopeAssignationSecurityScopeVO::class) ? $this->securityScope->value() : $this->securityScope;
    }
    public function unsetSecurityScope(): static
    {
        $this->securityScope = null;
        $this->securityScopeAssigned = false;
        return $this;
    }
    protected function withDefaultSecurityScope(): void
    {
    }
    protected function withAssertedSecurityScopeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->securityScopeAssigned = $this->securityScopeAssigned) {
            $value->securityScope = ScopeAssignationSecurityScopeVO::tryFrom($this->securityScope, $errorsList);
        }
    }
}
