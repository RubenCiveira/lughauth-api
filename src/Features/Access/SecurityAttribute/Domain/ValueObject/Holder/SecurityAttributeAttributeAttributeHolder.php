<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityAttribute\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\SecurityAttribute\Domain\ValueObject\SecurityAttributeAttributeVO;

trait SecurityAttributeAttributeAttributeHolder
{
    protected SecurityAttributeAttributeVO|string|null $attribute = null;
    protected bool $attributeAssigned = false;

    public function getAttributeOrDefault(?SecurityAttributeAttributeVO $attribute): ?SecurityAttributeAttributeVO
    {
        return $this->attributeAssigned ? ($this->attribute !== null ? SecurityAttributeAttributeVO::from($this->attribute) : null) : $attribute;
    }
    public function attribute(SecurityAttributeAttributeVO|string|null $attribute): static
    {
        $this->attribute = $attribute;
        $this->attributeAssigned = true;
        return $this;
    }
    public function getAttribute(): ?string
    {
        return is_a($this->attribute, SecurityAttributeAttributeVO::class) ? $this->attribute->value() : $this->attribute;
    }
    public function unsetAttribute(): static
    {
        $this->attribute = null;
        $this->attributeAssigned = false;
        return $this;
    }
    protected function withDefaultAttribute(): void
    {
    }
    protected function withAssertedAttributeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->attributeAssigned = $this->attributeAssigned) {
            $value->attribute = SecurityAttributeAttributeVO::tryFrom($this->attribute, $errorsList);
        }
    }
}
