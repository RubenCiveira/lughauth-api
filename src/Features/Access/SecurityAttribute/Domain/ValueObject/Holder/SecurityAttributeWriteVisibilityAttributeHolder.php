<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\SecurityAttribute\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\SecurityAttribute\Domain\ValueObject\SecurityAttributeWriteVisibilityVO;

trait SecurityAttributeWriteVisibilityAttributeHolder
{
    protected SecurityAttributeWriteVisibilityVO|string|null $writeVisibility = null;
    protected bool $writeVisibilityAssigned = false;

    public function getWriteVisibilityOrDefault(?SecurityAttributeWriteVisibilityVO $writeVisibility): ?SecurityAttributeWriteVisibilityVO
    {
        return $this->writeVisibilityAssigned ? ($this->writeVisibility !== null ? SecurityAttributeWriteVisibilityVO::from($this->writeVisibility) : null) : $writeVisibility;
    }
    public function writeVisibility(SecurityAttributeWriteVisibilityVO|string|null $writeVisibility): static
    {
        $this->writeVisibility = $writeVisibility;
        $this->writeVisibilityAssigned = true;
        return $this;
    }
    public function getWriteVisibility(): ?string
    {
        return is_a($this->writeVisibility, SecurityAttributeWriteVisibilityVO::class) ? $this->writeVisibility->value() : $this->writeVisibility;
    }
    public function unsetWriteVisibility(): static
    {
        $this->writeVisibility = null;
        $this->writeVisibilityAssigned = false;
        return $this;
    }
    protected function withDefaultWriteVisibility(): void
    {
        if ($this->writeVisibility === null) {
            $this->writeVisibility = 'EXPLICIT';
        }
    }
    protected function withAssertedWriteVisibilityRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->writeVisibilityAssigned = $this->writeVisibilityAssigned) {
            $value->writeVisibility = SecurityAttributeWriteVisibilityVO::tryFrom($this->writeVisibility, $errorsList);
        }
    }
}
