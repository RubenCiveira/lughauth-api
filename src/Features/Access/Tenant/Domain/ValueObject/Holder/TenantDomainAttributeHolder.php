<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Tenant\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Tenant\Domain\ValueObject\TenantDomainVO;

trait TenantDomainAttributeHolder
{
    protected TenantDomainVO|string|null $domain = null;
    protected bool $domainAssigned = false;

    public function getDomainOrDefault(?TenantDomainVO $domain): TenantDomainVO|string|null
    {
        return $this->domainAssigned ? ($this->domain !== null ? TenantDomainVO::from($this->domain) : null) : $domain;
    }
    public function domain(TenantDomainVO|string|null $domain): static
    {
        $this->domain = $domain;
        $this->domainAssigned = true;
        return $this;
    }
    public function getDomain(): ?string
    {
        return is_a($this->domain, TenantDomainVO::class) ? $this->domain->value() : $this->domain;
    }
    public function unsetDomain(): static
    {
        $this->domain = null;
        $this->domainAssigned = false;
        return $this;
    }
    protected function withDefaultDomain(): void
    {
    }
    protected function withAssertedDomainRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->domainAssigned = $this->domainAssigned) {
            $value->domain = TenantDomainVO::tryFrom($this->domain, $errorsList);
        }
    }
}
