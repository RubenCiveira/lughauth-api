<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\Tenant\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\Tenant\Domain\ValueObject\TenantRootVO;

trait TenantRootAttributeHolder
{
    protected TenantRootVO|bool|null $root = null;
    protected bool $rootAssigned = false;

    public function getRootOrDefault(?TenantRootVO $root): ?TenantRootVO
    {
        return $this->rootAssigned ? ($this->root !== null ? TenantRootVO::from($this->root) : null) : $root;
    }
    public function root(TenantRootVO|bool|null $root): static
    {
        $this->root = $root;
        $this->rootAssigned = true;
        return $this;
    }
    public function getRoot(): ?bool
    {
        return is_a($this->root, TenantRootVO::class) ? $this->root->value() : $this->root;
    }
    public function unsetRoot(): static
    {
        $this->root = null;
        $this->rootAssigned = false;
        return $this;
    }
    protected function withDefaultRoot(): void
    {
        if ($this->root === null) {
            $this->root = false;
        }
    }
    protected function withAssertedRootRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->rootAssigned = $this->rootAssigned) {
            $value->root = TenantRootVO::tryFrom($this->root, $errorsList);
        }
    }
}
