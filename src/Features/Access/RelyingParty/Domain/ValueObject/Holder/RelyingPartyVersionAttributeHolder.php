<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\RelyingParty\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\RelyingParty\Domain\ValueObject\RelyingPartyVersionVO;

trait RelyingPartyVersionAttributeHolder
{
    protected RelyingPartyVersionVO|int|null $version = null;
    protected bool $versionAssigned = false;

    public function getVersionOrDefault(?RelyingPartyVersionVO $version): RelyingPartyVersionVO|int|null
    {
        return $this->versionAssigned ? ($this->version !== null ? RelyingPartyVersionVO::from($this->version) : null) : $version;
    }
    public function version(RelyingPartyVersionVO|int|null $version): static
    {
        $this->version = $version;
        $this->versionAssigned = true;
        return $this;
    }
    public function getVersion(): ?int
    {
        return is_a($this->version, RelyingPartyVersionVO::class) ? $this->version->value() : $this->version;
    }
    public function unsetVersion(): static
    {
        $this->version = null;
        $this->versionAssigned = false;
        return $this;
    }
    protected function withDefaultVersion(): void
    {
    }
    protected function withAssertedVersionRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->versionAssigned = $this->versionAssigned) {
            $value->version = RelyingPartyVersionVO::tryFrom($this->version, $errorsList);
        }
    }
}
