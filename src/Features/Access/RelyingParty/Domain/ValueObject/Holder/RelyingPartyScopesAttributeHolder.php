<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\RelyingParty\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\RelyingParty\Domain\ValueObject\RelyingPartyScopesVO;

trait RelyingPartyScopesAttributeHolder
{
    protected RelyingPartyScopesVO|string|null $scopes = null;
    protected bool $scopesAssigned = false;

    public function getScopesOrDefault(?RelyingPartyScopesVO $scopes): ?RelyingPartyScopesVO
    {
        return $this->scopesAssigned ? ($this->scopes !== null ? RelyingPartyScopesVO::from($this->scopes) : null) : $scopes;
    }
    public function scopes(RelyingPartyScopesVO|string|null $scopes): static
    {
        $this->scopes = $scopes;
        $this->scopesAssigned = true;
        return $this;
    }
    public function getScopes(): ?string
    {
        return is_a($this->scopes, RelyingPartyScopesVO::class) ? $this->scopes->value() : $this->scopes;
    }
    public function unsetScopes(): static
    {
        $this->scopes = null;
        $this->scopesAssigned = false;
        return $this;
    }
    protected function withDefaultScopes(): void
    {
        if ($this->scopes === null) {
            $this->scopes = '""';
        }
    }
    protected function withAssertedScopesRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->scopesAssigned = $this->scopesAssigned) {
            $value->scopes = RelyingPartyScopesVO::tryFrom($this->scopes, $errorsList);
        }
    }
}
