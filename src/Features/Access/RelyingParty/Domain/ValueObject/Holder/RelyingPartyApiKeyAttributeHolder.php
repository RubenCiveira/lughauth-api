<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\RelyingParty\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\RelyingParty\Domain\ValueObject\RelyingPartyApiKeyVO;

trait RelyingPartyApiKeyAttributeHolder
{
    protected RelyingPartyApiKeyVO|string|null $apiKey = null;
    protected bool $apiKeyAssigned = false;

    public function getApiKeyOrDefault(?RelyingPartyApiKeyVO $apiKey): ?RelyingPartyApiKeyVO
    {
        return $this->apiKeyAssigned ? ($this->apiKey !== null ? RelyingPartyApiKeyVO::from($this->apiKey) : null) : $apiKey;
    }
    public function apiKey(RelyingPartyApiKeyVO|string|null $apiKey): static
    {
        $this->apiKey = $apiKey;
        $this->apiKeyAssigned = true;
        return $this;
    }
    public function getApiKey(): ?string
    {
        return is_a($this->apiKey, RelyingPartyApiKeyVO::class) ? $this->apiKey->value() : $this->apiKey;
    }
    public function unsetApiKey(): static
    {
        $this->apiKey = null;
        $this->apiKeyAssigned = false;
        return $this;
    }
    protected function withDefaultApiKey(): void
    {
    }
    protected function withAssertedApiKeyRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->apiKeyAssigned = $this->apiKeyAssigned) {
            $value->apiKey = RelyingPartyApiKeyVO::tryFrom($this->apiKey, $errorsList);
        }
    }
}
