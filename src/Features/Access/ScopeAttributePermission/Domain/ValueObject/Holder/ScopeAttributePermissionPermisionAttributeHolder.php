<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionPermisionVO;

trait ScopeAttributePermissionPermisionAttributeHolder
{
    protected ScopeAttributePermissionPermisionVO|string|null $permision = null;
    protected bool $permisionAssigned = false;

    public function getPermisionOrDefault(?ScopeAttributePermissionPermisionVO $permision): ?ScopeAttributePermissionPermisionVO
    {
        return $this->permisionAssigned ? ($this->permision !== null ? ScopeAttributePermissionPermisionVO::from($this->permision) : null) : $permision;
    }
    public function permision(ScopeAttributePermissionPermisionVO|string|null $permision): static
    {
        $this->permision = $permision;
        $this->permisionAssigned = true;
        return $this;
    }
    public function getPermision(): ?string
    {
        return is_a($this->permision, ScopeAttributePermissionPermisionVO::class) ? $this->permision->value() : $this->permision;
    }
    public function unsetPermision(): static
    {
        $this->permision = null;
        $this->permisionAssigned = false;
        return $this;
    }
    protected function withDefaultPermision(): void
    {
    }
    protected function withAssertedPermisionRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->permisionAssigned = $this->permisionAssigned) {
            $value->permision = ScopeAttributePermissionPermisionVO::tryFrom($this->permision, $errorsList);
        }
    }
}
