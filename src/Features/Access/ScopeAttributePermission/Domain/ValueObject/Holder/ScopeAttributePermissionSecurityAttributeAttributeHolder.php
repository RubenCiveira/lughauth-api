<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionSecurityAttributeVO;
use Civi\Lughauth\Features\Access\SecurityAttribute\Domain\SecurityAttributeRef;

trait ScopeAttributePermissionSecurityAttributeAttributeHolder
{
    protected ScopeAttributePermissionSecurityAttributeVO|SecurityAttributeRef|null $securityAttribute = null;
    protected bool $securityAttributeAssigned = false;

    public function getSecurityAttributeOrDefault(?ScopeAttributePermissionSecurityAttributeVO $securityAttribute): ?ScopeAttributePermissionSecurityAttributeVO
    {
        return $this->securityAttributeAssigned ? ($this->securityAttribute !== null ? ScopeAttributePermissionSecurityAttributeVO::from($this->securityAttribute) : null) : $securityAttribute;
    }
    public function securityAttribute(ScopeAttributePermissionSecurityAttributeVO|SecurityAttributeRef|null $securityAttribute): static
    {
        $this->securityAttribute = $securityAttribute;
        $this->securityAttributeAssigned = true;
        return $this;
    }
    public function getSecurityAttribute(): ?SecurityAttributeRef
    {
        return is_a($this->securityAttribute, ScopeAttributePermissionSecurityAttributeVO::class) ? $this->securityAttribute->value() : $this->securityAttribute;
    }
    public function unsetSecurityAttribute(): static
    {
        $this->securityAttribute = null;
        $this->securityAttributeAssigned = false;
        return $this;
    }
    protected function withDefaultSecurityAttribute(): void
    {
    }
    protected function withAssertedSecurityAttributeRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->securityAttributeAssigned = $this->securityAttributeAssigned) {
            $value->securityAttribute = ScopeAttributePermissionSecurityAttributeVO::tryFrom($this->securityAttribute, $errorsList);
        }
    }
}
