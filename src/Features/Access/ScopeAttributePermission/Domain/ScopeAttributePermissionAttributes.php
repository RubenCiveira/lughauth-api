<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain;

use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder\ScopeAttributePermissionUidAttributeHolder;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionUidVO;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder\ScopeAttributePermissionSecurityDomainAttributeHolder;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionSecurityDomainVO;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder\ScopeAttributePermissionSecurityAttributeAttributeHolder;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionSecurityAttributeVO;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder\ScopeAttributePermissionPermisionAttributeHolder;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionPermisionVO;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\Holder\ScopeAttributePermissionVersionAttributeHolder;
use Civi\Lughauth\Features\Access\ScopeAttributePermission\Domain\ValueObject\ScopeAttributePermissionVersionVO;
use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;

class ScopeAttributePermissionAttributes
{
    use ScopeAttributePermissionUidAttributeHolder;
    use ScopeAttributePermissionSecurityDomainAttributeHolder;
    use ScopeAttributePermissionSecurityAttributeAttributeHolder;
    use ScopeAttributePermissionPermisionAttributeHolder;
    use ScopeAttributePermissionVersionAttributeHolder;

    private const UNSETS = [
      'uid' => 'unsetUid',
      'securityDomain' => 'unsetSecurityDomain',
      'securityAttribute' => 'unsetSecurityAttribute',
      'permision' => 'unsetPermision',
      'version' => 'unsetVersion',
    ];

    public function build(): ScopeAttributePermission
    {
        $errors = new ConstraintFailList();
        $uid = ScopeAttributePermissionUidVO::tryFrom($this->uid, $errors);
        $securityDomain = ScopeAttributePermissionSecurityDomainVO::tryFrom($this->securityDomain, $errors);
        $securityAttribute = ScopeAttributePermissionSecurityAttributeVO::tryFrom($this->securityAttribute, $errors);
        $permision = ScopeAttributePermissionPermisionVO::tryFrom($this->permision, $errors);
        $version = ScopeAttributePermissionVersionVO::tryFrom($this->version, $errors);
        if ($errors->hasErrors()) {
            throw $errors->asConstraintException();
        }    return new ScopeAttributePermission(
            uid: $uid,
            securityDomain: $securityDomain,
            securityAttribute: $securityAttribute,
            permision: $permision,
            version: $version,
        );
    }
    public function withAssertedRules(): ScopeAttributePermissionAttributes
    {
        $value = new ScopeAttributePermissionAttributes();
        $errorsList = new ConstraintFailList();
        $this->withAssertedUidRules($value, $errorsList);
        $this->withAssertedSecurityDomainRules($value, $errorsList);
        $this->withAssertedSecurityAttributeRules($value, $errorsList);
        $this->withAssertedPermisionRules($value, $errorsList);
        $this->withAssertedVersionRules($value, $errorsList);
        if ($errorsList->hasErrors()) {
            throw $errorsList->asConstraintException();
        }
        return $value;
    }
    public function unset($field)
    {
        if (isset(self::UNSETS[$field])) {
            call_user_func([$this, self::UNSETS[$field]]);
        }
    }
    public function withDefaults(): ScopeAttributePermissionAttributes
    {
        $this->withDefaultUid();
        $this->withDefaultSecurityDomain();
        $this->withDefaultSecurityAttribute();
        $this->withDefaultPermision();
        $this->withDefaultVersion();
        return $this;
    }
}
