<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TenantPartySecurity\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\TenantPartySecurity\Domain\ValueObject\TenantPartySecurityPoliciesVO;

trait TenantPartySecurityPoliciesAttributeHolder
{
    protected TenantPartySecurityPoliciesVO|string|null $policies = null;
    protected bool $policiesAssigned = false;

    public function getPoliciesOrDefault(?TenantPartySecurityPoliciesVO $policies): ?TenantPartySecurityPoliciesVO
    {
        return $this->policiesAssigned ? ($this->policies !== null ? TenantPartySecurityPoliciesVO::from($this->policies) : null) : $policies;
    }
    public function policies(TenantPartySecurityPoliciesVO|string|null $policies): static
    {
        $this->policies = $policies;
        $this->policiesAssigned = true;
        return $this;
    }
    public function getPolicies(): ?string
    {
        return is_a($this->policies, TenantPartySecurityPoliciesVO::class) ? $this->policies->value() : $this->policies;
    }
    public function unsetPolicies(): static
    {
        $this->policies = null;
        $this->policiesAssigned = false;
        return $this;
    }
    protected function withDefaultPolicies(): void
    {
    }
    protected function withAssertedPoliciesRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->policiesAssigned = $this->policiesAssigned) {
            $value->policies = TenantPartySecurityPoliciesVO::tryFrom($this->policies, $errorsList);
        }
    }
}
