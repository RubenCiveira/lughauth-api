<?php

# @autogenerated
declare(strict_types=1);

namespace Civi\Lughauth\Features\Access\TenantPartySecurity\Domain\ValueObject\Holder;

use Civi\Lughauth\Shared\Value\Validation\ConstraintFailList;
use Civi\Lughauth\Features\Access\TenantPartySecurity\Domain\ValueObject\TenantPartySecurityTenantVO;
use Civi\Lughauth\Features\Access\Tenant\Domain\TenantRef;

trait TenantPartySecurityTenantAttributeHolder
{
    protected TenantPartySecurityTenantVO|TenantRef|null $tenant = null;
    protected bool $tenantAssigned = false;

    public function getTenantOrDefault(?TenantPartySecurityTenantVO $tenant): ?TenantPartySecurityTenantVO
    {
        return $this->tenantAssigned ? ($this->tenant !== null ? TenantPartySecurityTenantVO::from($this->tenant) : null) : $tenant;
    }
    public function tenant(TenantPartySecurityTenantVO|TenantRef|null $tenant): static
    {
        $this->tenant = $tenant;
        $this->tenantAssigned = true;
        return $this;
    }
    public function getTenant(): ?TenantRef
    {
        return is_a($this->tenant, TenantPartySecurityTenantVO::class) ? $this->tenant->value() : $this->tenant;
    }
    public function unsetTenant(): static
    {
        $this->tenant = null;
        $this->tenantAssigned = false;
        return $this;
    }
    protected function withDefaultTenant(): void
    {
    }
    protected function withAssertedTenantRules(self $value, ConstraintFailList $errorsList): void
    {
        if ($value->tenantAssigned = $this->tenantAssigned) {
            $value->tenant = TenantPartySecurityTenantVO::tryFrom($this->tenant, $errorsList);
        }
    }
}
