<?php

/* @autogenerated */

namespace Civi\Lughauth\Features\Oidc\User\Application\Listener;

use Civi\Lughauth\Features\Access\UserAccessTemporalCode\Domain\Event\UserAccessTemporalCodeGeneratePasswordRecoverEvent;
use Civi\Lughauth\Features\Notification\Message\Application\Usecase\SendMessage;
use Civi\Lughauth\Features\Notification\Message\Domain\Message;
use Civi\Lughauth\Features\Oidc\Authentication\Domain\AuthenticationResult;

class NotifyRecover
{
    public function __construct(private readonly SendMessage $sender)
    {

    }
    public function __invoke(UserAccessTemporalCodeGeneratePasswordRecoverEvent $auth)
    {
        $message = new Message(
            targetName: 'Ruben Civeira',
            targetAddress: 'rubenciveira@gmail.com',
            subject: 'Recovery ' . $auth->payload->getRecoveryCode(),
            txtContent: 'Como estas',
            htmlContent: '<h1>Como estas</h1>'
        );
        $this->sender->send($message);
    }
}
