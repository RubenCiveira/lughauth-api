<?php

/* @autogenerated */
declare(strict_types=1);

namespace Civi\Lughauth\Features\Rbac\Acl\Domain;

class MatchRule
{
    public function __construct(
        private string $effect, // allow / deny
        private string $type,   // actions / attributes
        private array $items,
        private Condition $condition
    ) {}

    public function getEffect(): string { return $this->effect; }
    public function getType(): string { return $this->type; }
    public function getItems(): array { return $this->items; }
    public function getCondition(): Condition { return $this->condition; }

    public static function fromArray(array $data): self
    {
        return new self(
            $data['effect'],
            $data['type'],
            $data['items'],
            Condition::fromArray($data['condition'])
        );
    }

    public function toArray(): array
    {
        return [
            'effect' => $this->effect,
            'type' => $this->type,
            'items' => $this->items,
            'condition' => $this->condition->toArray(),
        ];
    }
}
